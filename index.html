<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ë‚´ íƒ€ë¡œ íƒ„ìƒë²ˆí˜¸ & ë¼ì´í”„ íŒ¨ìŠ¤</title>
<style>
  :root{
    --bg:#F7F5FF; --bg2:#FAFAFE; --card:#FFFFFF; --ink:#222433; --muted:#6E6B7A;
    --accent:#6E65F4; --accent2:#9E91FF; --ring:rgba(158,145,255,.28);
    --soft:#F4F2FF; --soft2:#F8F7FF; --pill:#EFEAFF;
    --good:#4C3EF7; --border:#EEE8FF; --ok:#4F46E5; --warn:#9C7CF9;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family: ui-sans-serif,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;
       background:linear-gradient(180deg,var(--bg),var(--bg2)); color:var(--ink)}
  .wrap{max-width:980px; margin:0 auto; padding:28px 18px 40px}
  .hero{padding:6px 0 18px; text-align:center}
  .title{
    font-weight:900; font-size:30px; line-height:1.15; margin:10px 0 8px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  }
  .sub{color:var(--muted); margin:0 auto 12px; max-width:680px}
  .panel{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px;
         box-shadow:0 10px 26px rgba(60,40,120,.06)}
  .controls{display:flex; gap:8px; justify-content:center; align-items:center; flex-wrap:wrap}
  .seg{display:flex; gap:8px; align-items:center}
  input.segitem{width:84px; padding:10px 12px; border:1px solid #DDD7FF; border-radius:10px; outline:none;
                font-size:16px; text-align:center; background:#fff}
  input.segitem:focus{box-shadow:0 0 0 8px var(--ring); border-color:#CFC6FF}
  button{padding:10px 14px; border:none; border-radius:11px; background:var(--accent); color:#fff;
         font-weight:800; cursor:pointer; letter-spacing:.2px}
  button:hover{filter:brightness(.97)}
  #share{background:var(--accent2)}
  .hint{color:var(--muted); margin-top:8px; text-align:center}
  .result{margin-top:16px; display:none}
  .grid{display:grid; grid-template-columns: 1.02fr 1.18fr; gap:16px}
  @media (max-width:860px){ .grid{grid-template-columns:1fr} }
  .cardbox{background:var(--soft); border:1px solid var(--border); border-radius:16px; padding:16px}
  .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .lpnum{font-size:44px; font-weight:900; color:var(--good); min-width:72px}
  .muted{color:var(--muted)}
  .k{font-weight:900}
  .badge{display:inline-block; padding:6px 10px; border-radius:999px; background:#F1EEFF; color:#4F46E5;
         border:1px solid #E6E0FF; font-weight:700; font-size:13px; margin-right:6px; margin-top:4px}
  .chip{display:inline-block; padding:4px 8px; border-radius:999px; font-weight:800; font-size:12px}
  .chip.ok{background:#ECE9FF; color:var(--ok); border:1px solid var(--border)}
  .chip.warn{background:#F2EDFF; color:#5A4FE3; border:1px dashed #D5CCFF}
  .desc{line-height:1.85}
  .desc + .desc{margin-top:6px}
  .tarot-pane{display:grid; grid-template-columns:140px 1fr; gap:14px; align-items:center}
  @media (max-width:520px){ .tarot-pane{grid-template-columns:1fr} }
  .imgframe{width:140px; height:220px; border-radius:14px; background:linear-gradient(180deg,#FFF,#F6F2FF);
            border:1px solid var(--border); display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative}
  .imgframe img{width:100%; height:100%; object-fit:cover; display:block}
  .ph{display:flex; align-items:center; justify-content:center; text-align:center; padding:16px; color:#7B74B1}
  .ph .num{font-size:40px; font-weight:900; line-height:1}
  .ph .nm{font-weight:800; margin-top:6px}
  .copy{display:none; margin-top:10px; background:#F7F5FF; border:1px dashed #DAD1FF; border-radius:10px; padding:10px; color:#574F9A}
  .synergy{margin-top:16px; background:var(--soft2); border:1px solid var(--border); border-radius:14px; padding:14px 16px}
  .synergy .title2{font-weight:900; margin:0 0 6px}
  .footer{margin-top:18px; font-size:12px; color:var(--muted); text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="title">ë‚´ íƒ€ë¡œ íƒ„ìƒë²ˆí˜¸ & ë¼ì´í”„ íŒ¨ìŠ¤</h1>
      <p class="sub">ìƒì¼ì„ ì…ë ¥í•˜ë©´, ë¼ì´í”„ íŒ¨ìŠ¤ ë„˜ë²„ì™€ ì—°ê²°ëœ íƒ€ë¡œ ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ê°€ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
      <div class="panel">
        <div class="controls">
          <div class="seg">
            <input class="segitem" id="yy" inputmode="numeric" maxlength="4" placeholder="YYYY" aria-label="ì—°ë„">
            <span>Â·</span>
            <input class="segitem" id="mm" inputmode="numeric" maxlength="2" placeholder="MM" aria-label="ì›”">
            <span>Â·</span>
            <input class="segitem" id="dd" inputmode="numeric" maxlength="2" placeholder="DD" aria-label="ì¼">
          </div>
          <button id="calc">ê³„ì‚°í•˜ê¸°</button>
          <button id="share">ê²°ê³¼ ë§í¬ ë³µì‚¬</button>
        </div>
        <div class="hint">ì˜ˆ) 2001Â·08Â·15</div>

        <div id="result" class="result">
          <div class="grid">
            <!-- ìˆ˜ë¹„í•™ -->
            <div class="cardbox">
              <div class="row" style="margin-bottom:6px">
                <div class="lpnum" id="lpnum">â€“</div>
                <div>
                  <div><span class="k">ë¼ì´í”„ íŒ¨ìŠ¤ ë„˜ë²„</span> Â· <span id="lptext">â€”</span></div>
                  <div class="muted" id="doblabel"></div>
                </div>
              </div>
              <div id="lp-badges"></div>
              <div style="margin-top:8px">
                <span class="chip ok">ê°•ì </span>
                <div class="desc" id="lp-plus"></div>
              </div>
              <div style="margin-top:10px">
                <span class="chip warn">ì£¼ì˜</span>
                <div class="desc muted" id="lp-minus"></div>
              </div>
            </div>

            <!-- íƒ€ë¡œ -->
            <div class="cardbox">
              <div class="tarot-pane">
                <div class="imgframe" id="imgframe">
                  <div class="ph" id="placeholder">
                    <div>
                      <div class="num" id="phnum">â€“</div>
                      <div class="nm" id="phname">ì¹´ë“œ</div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="k" id="tarotline">â€”</div>
                  <div id="tarot-badges" style="margin:6px 0 6px"></div>
                  <div class="desc" id="desc">â€”</div>
                  <div class="desc" id="desc2"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- ì‹œë„ˆì§€: ë‘ ë°•ìŠ¤ ë°–, ì•„ë˜ì— ë¶„ë¦¬ -->
          <div class="synergy" id="synergyBox" style="display:none">
            <div class="title2" id="synTitle">ì‹œë„ˆì§€</div>
            <div id="synBody" class="desc"></div>
          </div>

          <div class="copy" id="copybox">ê²°ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë””ë“  ë¶™ì—¬ë„£ì–´ ê³µìœ í•˜ì„¸ìš” ğŸ˜Š</div>
          <div class="footer">ì¹´ë“œ ì´ë¯¸ì§€ë¥¼ ë„£ìœ¼ë ¤ë©´ ì´ íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— <code>cards/ìˆ«ì.png</code>ë¥¼ ì¶”ê°€í•˜ì„¸ìš” (ì˜ˆ: <code>4.png</code>). ë°”ë³´ ì¹´ë“œëŠ” <code>0.png</code> ë˜ëŠ” <code>22.png</code>ë¥¼ ë‘˜ ë‹¤ ì§€ì›í•©ë‹ˆë‹¤.</div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- ìœ í‹¸ ---------- */
function sumDigits(str){ return str.split('').reduce((a,ch)=> a + (/\d/.test(ch)? Number(ch):0), 0); }
function reduceNumber(n){
  if (n===11 || n===22) return n;
  while(n>9){
    n = String(n).split('').reduce((a,b)=>a+Number(b),0);
    if (n===11 || n===22) break;
  }
  return n;
}

/* ---------- íƒ€ë¡œ ì¹´ë“œ ë°ì´í„° : ë³¸ë¬¸ì„ ì¡°ê¸ˆ ë” í’ì„±í•˜ê²Œ(2ë¬¸ë‹¨) ---------- */
const TAROT = {
  0:{name:'ë°”ë³´ (The Fool)', num:'0/22', kw:['ìˆœìˆ˜','ë„ì „','ìƒˆ ì¶œë°œ','ììœ '],
     desc:'ë§ˆìŒì´ ë¨¼ì € ì›€ì§ì´ëŠ” ì‹œê°„. ì•„ì§ ì •ë‹µì€ ì—†ì–´ë„ â€œê°€ë³ê²Œ ì‹œì‘â€í•˜ë©´ ê¸¸ì´ ì—´ë¦½ë‹ˆë‹¤.',
     desc2:'ì™„ë²½í•œ ê³„íšë³´ë‹¤ ì‘ì€ ì‹œë„ê°€ ë” ë©€ë¦¬ ë°ë ¤ë‹¤ì¤˜ìš”. í˜¸ê¸°ì‹¬ì„ ë”°ë¼ê°€ë©° ê²½í—˜ì„ ìˆ˜ì§‘í•´ ë³´ì„¸ìš”.'},
  1:{name:'ë§ˆë²•ì‚¬ (The Magician)', num:'1', kw:['ì‹œì‘','ì°½ì¡°','ì˜ì§€','ì‹¤í–‰'],
     desc:'ë¨¸ë¦¿ì† ì¬ë£Œë¥¼ í˜„ì‹¤ë¡œ ì†Œí™˜í•˜ëŠ” ì¡°ìœ¨ì. ë„êµ¬Â·ë©”ì‹œì§€Â·íƒ€ì´ë°ì„ í•œ ì ìœ¼ë¡œ ëª¨ìë‹ˆë‹¤.',
     desc2:'í•µì‹¬ì€ ì¦‰ì‹œì„±. ì˜¤ëŠ˜ ê°€ëŠ¥í•œ ìµœì†Œ ì‹¤í–‰ì„ ì •í•˜ê³ , ì‘ì€ ì„±ê³¼ë¥¼ ì—°ì†ìœ¼ë¡œ ìŒ“ì•„ê°€ë©´ ì¢‹ì•„ìš”.'},
  2:{name:'ì—¬ì‚¬ì œ (High Priestess)', num:'2', kw:['ì§ê´€','ë‚´ë©´','ë¹„ë°€','ì§€í˜œ'],
     desc:'ê²‰ë³´ë‹¤ ì†, ë§ë³´ë‹¤ ì‚¬ì´. ì¡°ìš©í•œ ê´€ì°°ì´ ë°©í–¥ì„ ì •í•©ë‹ˆë‹¤.',
     desc2:'ì •ë³´ë¥¼ ë” ëª¨ì„ í•„ìš”ê°€ ìˆê±°ë‚˜, ì ê¹ì˜ ì‰¼ì´ ë‹µì´ ë˜ëŠ” ë•Œ. ì§ê°ì˜ ë¯¸ì„¸í•œ ì‹ í˜¸ë¥¼ ë¯¿ì–´ ì£¼ì„¸ìš”.'},
  3:{name:'ì—¬í™©ì œ (The Empress)', num:'3', kw:['í’ìš”','ì°½ì¡°ì„±','ëŒë´„','ìì—°'],
     desc:'ë¬´ë¥´ìµëŠ” ê³„ì ˆ. ê´€ê³„ì™€ ì‘ì—…ì´ ìì—°ìŠ¤ë ˆ í’ì„±í•´ì§‘ë‹ˆë‹¤.',
     desc2:'ìƒí™œ ë¦¬ë“¬ì„ ëŒë³¼ìˆ˜ë¡ ê²°ê³¼ë¬¼ì˜ ì§ˆë„ ì¢‹ì•„ì ¸ìš”. ì •ì„±Â·ê¾¸ì¤€í•¨Â·ë”°ëœ»í•¨ì´ ìµœê³ ì˜ ì„±ì¥ ë¹„ë£Œì…ë‹ˆë‹¤.'},
  4:{name:'í™©ì œ (The Emperor)', num:'4', kw:['êµ¬ì¡°','ì•ˆì •','ì±…ì„','ë¦¬ë”ì‹­'],
     desc:'í† ëŒ€ì™€ ì§ˆì„œ, ëª…í™•í•œ ê²°ì •. ê¸°ì¤€ì„ ì„¸ìš°ë©´ ì—ë„ˆì§€ê°€ ë‚­ë¹„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
     desc2:'ì¥ê¸° ìš´ì˜Â·ê±°ë²„ë„ŒìŠ¤ì— ê°•ì . ì—­í• ê³¼ ê¶Œí•œì„ ì •ë¦¬í•˜ë©´ íŒ€ì´ í¸ì•ˆí•´ì§‘ë‹ˆë‹¤.'},
  5:{name:'êµí™© (The Hierophant)', num:'5', kw:['ì „í†µ','ì‹ ë¢°','ê°€ë¥´ì¹¨','ë©˜í† '],
     desc:'ê²€ì¦ëœ ê¸¸ê³¼ ì§€ì‹ì˜ ì „ìˆ˜. ë°°ìš°ê³  ë‚˜ëˆ„ë©° ì‹ ë¢°ë¥¼ ìŒ“ìŠµë‹ˆë‹¤.',
     desc2:'ì›ì¹™ì„ ì†ì— ì¥ê³  ì‘ìš©í•˜ë©´ í”ë“¤ë¦¬ì§€ ì•Šì•„ìš”. ë©˜í† /ì»¤ë®¤ë‹ˆí‹°ì™€ ì—°ê²°í•´ ë³´ì„¸ìš”.'},
  6:{name:'ì—°ì¸ (The Lovers)', num:'6', kw:['ì‚¬ë‘','ì„ íƒ','ì¡°í™”','ê´€ê³„'],
     desc:'ë¬´ì—‡ì„ í•˜ëŠëƒ ëª»ì§€ì•Šê²Œ ëˆ„êµ¬ì™€ í•˜ëŠëƒê°€ ì¤‘ìš”. ë§ˆìŒê³¼ ê°€ì¹˜ê°€ ë§ëŠ” ì„ íƒì„.',
     desc2:'ê´€ê³„ì˜ ì§ˆì´ ì„±ê³¼ì˜ ì§ˆì„ ë§Œë“­ë‹ˆë‹¤. ì„œë¡œì˜ â€œì˜ˆ/ì•„ë‹ˆì˜¤â€ë¥¼ ì¡´ì¤‘í•˜ëŠ” í•©ì´ í•„ìš”í•´ìš”.'},
  7:{name:'ì „ì°¨ (The Chariot)', num:'7', kw:['ì˜ì§€','ì¶”ì§„ë ¥','ìŠ¹ë¦¬','ì§‘ì¤‘'],
     desc:'ë°©í–¥ì´ ì •í•´ì§€ë©´ ì†ë„ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ë¶™ìŠµë‹ˆë‹¤. ë°©í•´ ìš”ì†Œë¥¼ ì •ë¦¬í•˜ê³  í•œ ì ìœ¼ë¡œ ëª¨ìœ¼ì„¸ìš”.',
     desc2:'ì§‘ì¤‘ ê·¼ìœ¡ì„ ë‹¨ê¸°ê°„ì— í‚¤ìš°ëŠ” ë•Œ. ì ì€ ëª©í‘œë¥¼ ë¹ ë¥´ê²Œ ì™„ì£¼í•˜ë©´ ìì‹ ê°ì´ í¬ê²Œ ì˜¤ë¦…ë‹ˆë‹¤.'},
  8:{name:'í˜ (Strength)', num:'8', kw:['ìš©ê¸°','ì¸ë‚´','ìê¸° í†µì œ'],
     desc:'ë¶€ë“œëŸ¬ìš´ í†µì œê°€ ë‹¨ë‹¨í•œ í˜ì´ ë©ë‹ˆë‹¤. ìŠ¤ìŠ¤ë¡œë¥¼ ë‹¤ìŠ¤ë¦´ ë•Œ ì™¸ë¶€ì˜ ë‚œê´€ë„ í’€ë ¤ìš”.',
     desc2:'ê¾¸ì¤€í•¨Â·íšŒë³µë ¥ì´ í•µì‹¬. ê°ì •ì˜ íŒŒë™ì„ ì²œì²œíˆ ì§„ì •ì‹œí‚¤ë©° í˜ì´ìŠ¤ë¥¼ ì§€ì¼œ ë³´ì„¸ìš”.'},
  9:{name:'ì€ë‘”ì (The Hermit)', num:'9', kw:['íƒêµ¬','ì„±ì°°','ì§€í˜œ','ê³ ë…'],
     desc:'í˜¼ìë§Œì˜ ë“±ì´ í•„ìš”í•©ë‹ˆë‹¤. ë²ˆì¡ì„ ëœì–´ë‚´ë©´ í†µì°°ì´ ë˜ë ·í•´ì ¸ìš”.',
     desc2:'ê¸°ë¡ê³¼ ì‚¬ìœ ê°€ í° í˜ì´ ë©ë‹ˆë‹¤. ì¡°ìš©í•œ ëª°ì…ì˜ ì‹œê°„ì„ ìŠ¤ìŠ¤ë¡œì—ê²Œ ì„ ë¬¼í•˜ì„¸ìš”.'},
  10:{name:'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´ (Wheel of Fortune)', num:'10', kw:['ë³€í™”','íë¦„','ì „í™˜','ê¸°íšŒ'],
     desc:'íë¦„ì— ì˜¬ë¼íƒ€ëŠ” ì§€ì ì´ ë³´ì…ë‹ˆë‹¤. ì§‘ì°©ì„ ë‚´ë ¤ë†“ì„ìˆ˜ë¡ ë¬¸ì´ ì—´ë ¤ìš”.',
     desc2:'ì‘ì€ ì§•í›„ë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”. íƒ€ì´ë°ë§Œ ë§ì•„ë„ ì„±ê³¼ê°€ ê°€ë³ê²Œ êµ´ëŸ¬ê°‘ë‹ˆë‹¤.'},
  11:{name:'ì •ì˜ (Justice)', num:'11', kw:['ê· í˜•','ê³µì •','ì§„ì‹¤','ì±…ì„'],
     desc:'ì‚¬ì‹¤ê³¼ ê¸°ì¤€ì„ ë˜ë ·ì´. ë¶ˆê· í˜•ì„ ë°”ë¡œì¡ê³  ê²°ê³¼ì— ì±…ì„ì§‘ë‹ˆë‹¤.',
     desc2:'ê°ì •ê³¼ ì‚¬ì‹¤ì„ ë¶„ë¦¬í•˜ë©´ í•´ê²°ì´ ë³´ì…ë‹ˆë‹¤. ê³„ì•½Â·ì •ì‚°Â·ì˜ì‚¬ê²°ì •ì— ìœ ë¦¬í•œ ì‹œê¸°.'},
  12:{name:'ë§¤ë‹¬ë¦° ì‚¬ëŒ (Hanged Man)', num:'12', kw:['ê´€ì  ì „í™˜','ë©ˆì¶¤','ìˆ˜ìš©'],
     desc:'ì„œë‘ë¥´ì§€ ì•ŠëŠ” ìš©ê¸°. ë°©í–¥ì„ ë°”ê¾¸ë©´ ë‹µì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.',
     desc2:'ë‚´ë ¤ë†“ìŒì´ ì—­ì„¤ì ìœ¼ë¡œ ì§„ì „ì„ ë§Œë“­ë‹ˆë‹¤. ì—¬ìœ ë¥¼ í—ˆë½í•´ ì£¼ì„¸ìš”.'},
  13:{name:'ì£½ìŒ (Death)', num:'13', kw:['ì¢…ê²°','ì¬íƒ„ìƒ','í° ë³€í™”'],
     desc:'ë‚¡ì€ ê²ƒì„ ë³´ë‚´ ìƒˆ ê¸¸ì„ ì—½ë‹ˆë‹¤. ëì€ ì‹œì‘ì˜ ë‹¤ë¥¸ ì´ë¦„.',
     desc2:'ê³¼ê°í•œ ì •ë¦¬ê°€ ê³§ ì„±ì¥ì˜ ê³µê°„ì´ ë©ë‹ˆë‹¤. ë¹„ì›Œì•¼ ë“¤ì–´ì™€ìš”.'},
  14:{name:'ì ˆì œ (Temperance)', num:'14', kw:['ì¤‘ìš©','ê· í˜•','ì¹˜ìœ ','ì¡°í™”'],
     desc:'ì„ê³  í¬ì„í•˜ë©° ë¹„ìœ¨ì„ ë§ì¶”ëŠ” ì—°ê¸ˆìˆ . ë¬´ë¦¬í•˜ì§€ ì•ŠëŠ” ì¡°í•©ì´ ì˜¤ë˜ê°‘ë‹ˆë‹¤.',
     desc2:'í˜ì´ìŠ¤ ê´€ë¦¬Â·íœ´ì‹Â·ë¬¼ ë§ˆì‹œê¸°ê°€ ìƒê°ë³´ë‹¤ í° ë³€í™”ë¥¼ ì¤ë‹ˆë‹¤.'},
  15:{name:'ì•…ë§ˆ (The Devil)', num:'15', kw:['ìœ í˜¹','ì§‘ì°©','íŒ¨í„´'],
     desc:'ë¬¶ëŠ” ê²ƒì€ ì‚¬ìŠ¬ì´ ì•„ë‹ˆë¼ ìŠµê´€. ì¸ì‹í•˜ë©´ ì ˆë°˜ì€ í’€ë ¸ìŠµë‹ˆë‹¤.',
     desc2:'â€œì¦ê±°ì›€/ì„±ê³¼â€ì˜ ë¹„ìœ¨ì„ ë‹¤ì‹œ ì ê²€í•˜ì„¸ìš”. ì›í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì¡°ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.'},
  16:{name:'íƒ‘ (The Tower)', num:'16', kw:['ë¶•ê´´','ê°ì„±','í•´ë°©'],
     desc:'ë¬´ë„ˆì§€ëŠ” í‹€ ì†ì—ì„œ ì§„ì§œ ììœ ê°€ ì‹œì‘ë©ë‹ˆë‹¤.',
     desc2:'ìœ„ê¸°ë¥¼ â€œì˜¤ë˜ëœ ì˜¤ë¥˜ ìˆ˜ì •â€ìœ¼ë¡œ ë³´ë©´ ë§ˆìŒì´ ê°€ë²¼ì›Œì ¸ìš”. ìƒˆ êµ¬ì¡°ë¥¼ ì°¨ë¶„íˆ ì„¸ì›Œ ë´…ì‹œë‹¤.'},
  17:{name:'ë³„ (The Star)', num:'17', kw:['í¬ë§','ì˜ê°','ì¹˜ìœ ','ë¹„ì „'],
     desc:'ë¨¼ ê³³ì˜ ë¹›ì´ ê¸¸ì„ ê°€ë¦¬í‚µë‹ˆë‹¤. ë‹¹ì¥ì€ ëŠë ¤ë„ ë°©í–¥ì´ ë§ìŠµë‹ˆë‹¤.',
     desc2:'íˆ¬ëª…í•¨ê³¼ íšŒë³µì´ ì„±ê³¼ë¥¼ ë¶€ë¦…ë‹ˆë‹¤. ë§ˆìŒì„ ì •ë¹„í•˜ê³  ë‹¤ì‹œ ë¯¿ì–´ ì£¼ì„¸ìš”.'},
  18:{name:'ë‹¬ (The Moon)', num:'18', kw:['ë¬´ì˜ì‹','ë¶ˆì•ˆ','ìƒìƒ','ì§ê°'],
     desc:'ì•ˆê°œ ì† ê¸¸. ë¶ˆí™•ì‹¤í•¨ì„ ì¸ì •í• ìˆ˜ë¡ ë‘ë ¤ì›€ì´ ì¤„ì–´ìš”.',
     desc2:'í° ê²°ì •ì€ ì ì‹œ ë¯¸ë£¨ê³  ì‘ì€ í™•ì¸ì„ ìŒ“ìœ¼ì„¸ìš”. ê¿ˆÂ·ë©”ëª¨ê°€ ë‹¨ì„œê°€ ë©ë‹ˆë‹¤.'},
  19:{name:'íƒœì–‘ (The Sun)', num:'19', kw:['ì„±ì·¨','ìƒëª…ë ¥','ìì‹ ê°','ê¸°ì¨'],
     desc:'ê°€ì¥ ë°ì€ ì¹´ë“œ. ë§ˆìŒê» í¼ì¹˜ê³ , ë‚˜ëˆ„ê³ , ì¶•í•˜í•˜ì„¸ìš”.',
     desc2:'ë“œëŸ¬ëƒ„ì´ ê³§ í™•ì¥. ë‹¹ì‹ ì˜ ê¸°ì¨ì´ ì£¼ë³€ì„ í™˜í•˜ê²Œ ë¹„ì¶¥ë‹ˆë‹¤.'},
  20:{name:'ì‹¬íŒ (Judgement)', num:'20', kw:['ë¶€ë¦„','íšŒë³µ','ê°ì„±','ìƒˆ ì‚¶'],
     desc:'ê¹Šì€ ê³³ì—ì„œ ìš¸ë¦¬ëŠ” í˜¸ì¶œ. ì˜ˆì „ì˜ ë‚˜ë¥¼ ë„˜ì–´ì„œëŠ” ìˆœê°„.',
     desc2:'ì •ë¦¬â€“íšŒë³µâ€“ì¬ì‹œì‘ì˜ ë°•ìë¥¼ íƒ€ì„¸ìš”. ì§„ì‹¬ì´ ì‚¬ëŒì„ ì¼ìœ¼í‚µë‹ˆë‹¤.'},
  21:{name:'ì„¸ê³„ (The World)', num:'21', kw:['ì™„ì„±','í†µí•©','ê·€ê²°','ìˆœí™˜'],
     desc:'í•œ ë°”í€´ì˜ ì™„ì„±. ëì´ì ë‹¤ìŒ ì›ì˜ ì‹œì‘.',
     desc2:'ê²½í—˜ì´ í†µí•©ë ìˆ˜ë¡ ë‹¤ìŒ ì—¬ì •ì˜ ìë³¸ì´ ë©ë‹ˆë‹¤. ìˆ˜ê³ í–ˆë‹¤ëŠ” ì¸ì‚¬ë„ ìŠì§€ ë§ê¸°!'}
};

/* ---------- ë¼ì´í”„ íŒ¨ìŠ¤ í”„ë¡œí•„ + ì‹œë„ˆì§€ ë¬¸êµ¬(ì¡°ê¸ˆ ë” ê¸¸ê³  ë”°ëœ»í•˜ê²Œ) ---------- */
const LP = {
  1:{label:'ë…ë¦½Â·ê°œì²™Â·ë¦¬ë”ì‹­', tags:['ë¦¬ë”ì‹­','ê°œì²™','ê²°ë‹¨'],
     plus:'ìƒˆ ê¸¸ì„ ë‚´ëŠ” ì¶”ì§„ë ¥ì´ ê°•í•©ë‹ˆë‹¤. ì‚¬ëŒë“¤ì„ ì„¤ë“í•˜ê³  ì•ì¥ì„œì„œ ë°©í–¥ì„ ì¡ëŠ” ì¼ì´ ì˜ ë§ì•„ìš”. â€œë¨¼ì € ì‹œì‘â€ì—ì„œ ì„±ê³¼ê°€ ë‚©ë‹ˆë‹¤.',
     minus:'ë¹ ë¥¸ íŒë‹¨ì´ ë•Œë¡œëŠ” ë…ë‹¨ì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆì–´ìš”. í˜‘ì—…Â·ë§ˆë¬´ë¦¬ ë‹¨ê³„ëŠ” ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì²œì²œíˆ í™•ì¸í•´ ì£¼ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) ë§Œë‚˜ë©´ ì•„ì´ë””ì–´ê°€ ë°”ë¡œ ì‹¤í–‰ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤. 1ì¸ í”„ë¡œì íŠ¸Â·ì°½ì—…Â·ì„ ë„ì  ì‹œë„ì—ì„œ ê°€ë³ê²Œ ì‹œë™ ê±¸ê³  ë¹ ë¥´ê²Œ ì„±ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.'},
  2:{label:'í˜‘ë ¥Â·ê°ìˆ˜ì„±Â·ì¡°ì •', tags:['í˜‘ì—…','ì¡°ìœ¨','ê´€ì°°'],
     plus:'ìƒëŒ€ì˜ ì†ë„ì™€ ê°ì •ì„ ì„ ì˜ ì½ì–´ ë‹¤ë¦¬ê°€ ë˜ì–´ ì¤ë‹ˆë‹¤. íŒ€ì˜ ê¸´ì¥ì„ ë‚®ì¶”ê³  ì•ˆì •ì ì¸ íë¦„ì„ ë§Œë“œëŠ” ì¬ëŠ¥ì´ ì»¤ìš”.',
     minus:'ê²°ì •ì„ ë¯¸ë£¨ë‹¤ ê¸°íšŒë¥¼ ë†“ì¹˜ê¸° ì‰¬ì›Œìš”. â€œë‚´ ê¸°ì¤€â€ì„ í•œ ì¤„ë¡œ ì •í•´ ë‘ë©´ ì†ë„ê°€ ë¶™ìŠµë‹ˆë‹¤.',
     synergy:'{card}ì™€(ê³¼) í•¨ê»˜ë¼ë©´ ê´€ì°°Â·ì§ê´€ì˜ ì •ë°€ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤. ì´ˆë°˜ ë¦¬ì„œì¹˜Â·ê²€ì¦ ë‹¨ê³„ì—ì„œ ë§¤ë„ëŸ½ê²Œ í•©ì„ ë§ì¶”ë©° ì‹ ë¢°ë¥¼ ì–»ìŠµë‹ˆë‹¤.'},
  3:{label:'í‘œí˜„Â·ì°½ì˜Â·ì¦ê±°ì›€', tags:['í‘œí˜„','ì°½ì˜','ì¦ê±°ì›€'],
     plus:'ë§Â·ê¸€Â·ë””ìì¸ ê°™ì€ í‘œí˜„ë ¥ì´ í’ë¶€í•©ë‹ˆë‹¤. ì‚¬ëŒì„ ê¸°ë¶„ ì¢‹ê²Œ ë§Œë“œëŠ” ì—ë„ˆì§€ê°€ ìˆì–´ìš”. ì¦ê±°ì›€ ê¸°ë°˜ì˜ ì°½ì‘ì—ì„œ ì˜í–¥ë ¥ì´ ì»¤ì§‘ë‹ˆë‹¤.',
     minus:'í¥ë¯¸ê°€ ì˜®ê²¨ ë‹¤ë‹ˆë©´ ì™„ì„±ë„ê°€ ííŠ¸ëŸ¬ì§ˆ ìˆ˜ ìˆì–´ìš”. ì‘ì€ ëª©í‘œÂ·ì£¼ê°„ ë¦¬ë“¬ìœ¼ë¡œ ì‘ì—…ì„ ë‹¤ë…ì—¬ ì£¼ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) ë§Œë‚˜ë©´ ì•„ì´ë””ì–´ê°€ ì‹¤ì œ â€œì„±ê³¼ë¬¼â€ë¡œ í’ì„±í•˜ê²Œ ìëë‹ˆë‹¤. ì½˜í…ì¸ Â·ë¸Œëœë”©Â·ì»¤ë®¤ë‹ˆí‹° ì˜ì—­ì—ì„œ ì¡´ì¬ê°ì´ ì»¤ì§€ê³  ìˆ˜ìµí™”ì˜ ì‹¤ë§ˆë¦¬ë„ ì¡í™ë‹ˆë‹¤.'},
  4:{label:'ì•ˆì •Â·ì„±ì‹¤Â·ê¸°ë°˜', tags:['ê¸°ë°˜','ê´€ë¦¬','ê¾¸ì¤€í•¨'],
     plus:'ë£¨í‹´ê³¼ ì‹œìŠ¤í…œì„ ì„¸ìš°ê³  ì§€í‚¤ëŠ” í˜. ì‹ ë¢°ë¥¼ ì°¨ê³¡ì°¨ê³¡ ìŒ“ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. ì¥ê¸° ìš´ì˜Â·í‘œì¤€í™”ì— ê°•ì ì´ ìˆì–´ìš”.',
     minus:'ê¸‰ê²©í•œ ë³€í™”ì—ëŠ” ë‘”ê°í•´ì§ˆ ìˆ˜ ìˆì–´ìš”. ì•ˆì „ ë ˆì¼ì„ ë§Œë“  ë’¤ ì‘ì€ ì‹¤í—˜ë¶€í„° ì‹œì‘í•´ ë³´ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) í•¨ê»˜ë¼ë©´ â€œíŠ¼íŠ¼í•œ ê¸°ë°˜ ìœ„ì˜ í™•ì¥â€ì´ ë¹¨ë¼ì§‘ë‹ˆë‹¤. ìš´ì˜Â·ë§¤ë‰´ì–¼Â·ë¸Œëœë”©ì—ì„œ ì•ˆì •ê° ìˆëŠ” ì„±ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.'},
  5:{label:'ë³€í™”Â·ëª¨í—˜Â·ììœ ', tags:['ì „í™˜','ì‹¤í—˜','í™•ì¥'],
     plus:'ìƒˆ íŒì„ ë¹ ë¥´ê²Œ ì´í•´í•˜ê³  ì ì‘í•©ë‹ˆë‹¤. ë°°ì›€ê³¼ ì—¬í–‰, ë‹¤ì–‘í•œ ê²½í—˜ì—ì„œ ì˜ê°ì´ ìƒ˜ì²˜ëŸ¼ ì˜¬ë¼ì™€ìš”.',
     minus:'ë£¨í‹´ì´ ì‰½ê²Œ ë¬´ë„ˆì§ˆ ìˆ˜ ìˆì–´ìš”. í•µì‹¬ ì§€í‘œ 1~2ê°œë§Œ ë¶™ì¡ê³  ì§‘ì¤‘ë„ë¥¼ ìœ ì§€í•´ ë³´ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) ê²°í•©í•˜ë©´ ë°°ì›€ê³¼ ì „íŒŒì˜ íë¦„ì´ ì‹œì›í•˜ê²Œ ì—´ë¦½ë‹ˆë‹¤. êµìœ¡Â·ì—¬í–‰Â·ìƒˆ ì„œë¹„ìŠ¤ ë² íƒ€ ë¡ ì¹­ì— ë”± ì¢‹ì•„ìš”.'},
  6:{label:'ëŒë´„Â·ì±…ì„Â·ì¡°í™”', tags:['ëŒë´„','ì±…ì„','ì¡°í™”'],
     plus:'ê´€ê³„ì˜ ê· í˜•ì„ ë§ì¶”ê³  ì±…ì„ì„ ë‹¤í•©ë‹ˆë‹¤. íŒ€/ê³ ê° ê²½í—˜ì„ ì •ì„±ê» ê°€ê¾¸ëŠ” ëŠ¥ë ¥ì´ ì»¤ìš”.',
     minus:'ê³¼ì‰ ì±…ì„ìœ¼ë¡œ ë²ˆì•„ì›ƒ ë˜ê¸° ì‰¬ì›Œìš”. ê²½ê³„Â·ë¶„ë‹´ì„ ëª…í™•íˆ ì •í•˜ê³  ë‚˜ëˆ  ê°–ëŠ” ì—°ìŠµì„ í•´ ë³´ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) ë§Œë‚˜ë©´ â€œê°€ì¹˜ ì •ë ¬ëœ íŒŒíŠ¸ë„ˆì‹­â€ì´ ì„±ê³¼ë¥¼ ì´ëŒì–´ ëƒ…ë‹ˆë‹¤. ê´€ê³„ê°€ ê³§ ì‹œìŠ¤í…œì´ ë˜ëŠ” ê²½í—˜ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.'},
  7:{label:'íƒêµ¬Â·ë¶„ì„Â·ì§‘ì¤‘', tags:['íƒêµ¬','ë¶„ì„','ì§‘ì¤‘'],
     plus:'ë³¸ì§ˆì„ íŒŒê³ ë“œëŠ” ì—°êµ¬í˜• ê¸°ì§ˆ. ë¬¸ì œì˜ í•µì‹¬ì„ ì •í™•íˆ ì°¾ì•„ëƒ…ë‹ˆë‹¤.',
     minus:'ì™„ë²½ì£¼ì˜ì™€ ê³ ë¦½ìœ¼ë¡œ ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆì–´ìš”. ì‘ì€ ì‹¤í—˜â€“í”¼ë“œë°± ë£¨í”„ë¥¼ ì§§ê²Œ ê°€ì ¸ê°€ë©´ ì¢‹ì•„ìš”.',
     synergy:'{card}ì˜ ì¶”ì§„ë ¥ê³¼ í•©ì³ì§€ë©´ â€œê¹Šì´+ì†ë„â€ê°€ ë™ì‹œì— ì‚´ì•„ë‚©ë‹ˆë‹¤. ì „ëµÂ·ë°ì´í„°Â·ë¶„ì„ í”„ë¡œì íŠ¸ì— íŠ¹íˆ ìœ ë¦¬í•©ë‹ˆë‹¤.'},
  8:{label:'ê¶Œìœ„Â·ì„±ì·¨Â·ì¬ì •', tags:['ê¶Œìœ„','ì„±ê³¼','ì¬ì •'],
     plus:'ëª©í‘œ ë‹¬ì„±ê³¼ ìˆ˜ìµí™”ì— ê°•í•©ë‹ˆë‹¤. ê³¼ì •ì„ êµ¬ì¡°í™”í•˜ê³  ì„±ì¥ì‹œí‚¤ëŠ” ìš´ì˜ ëŠ¥ë ¥ì´ ìˆì–´ìš”.',
     minus:'í†µì œê°€ ê³¼í•˜ë©´ íŒ€ì˜ ììœ¨ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. ì›ì¹™ì€ ë‹¨ë‹¨í•˜ê²Œ, ì‹¤í–‰ì€ ìœ ì—°í•˜ê²Œ ê°€ì ¸ê°€ ë³´ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) í•¨ê»˜ë¼ë©´ â€œë¶€ë“œëŸ¬ìš´ í†µì œâ€ë¡œ ì§€ì† ê°€ëŠ¥í•œ ì„±ê³¼ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜‘ìƒÂ·ìš´ì˜ ì´ê´„Â·ìŠ¤ì¼€ì¼ì—…ì— ê°•í•©ë‹ˆë‹¤.'},
  9:{label:'í¬ìš©Â·ë´‰ì‚¬Â·ì§€í˜œ', tags:['í¬ìš©','ì˜ë¯¸','ì¹˜ìœ '],
     plus:'ì‚¬ëŒê³¼ ì´ì•¼ê¸°ë¥¼ ê¹Šì´ ì´í•´í•˜ê³  í’ˆì–´ ì¤ë‹ˆë‹¤. í° ê·¸ë¦¼ì—ì„œ ì˜ë¯¸ë¥¼ ì°¾ì•„ ì „í•˜ëŠ” ì¬ëŠ¥ì´ ì»¤ìš”.',
     minus:'í˜„ì‹¤ ë””í…Œì¼ê³¼ ìˆ˜ìµì„±ì´ ì•½í•´ì§ˆ ìˆ˜ ìˆì–´ìš”. ì—­í• ê³¼ ë²”ìœ„ë¥¼ ëª…í™•íˆ í•´ ë‘ë©´ í¸ì•ˆí•©ë‹ˆë‹¤.',
     synergy:'{card}ì™€(ê³¼) ê²°í•©í•˜ë©´ â€œë‚´ì  í†µì°°ì´ ë¹›ì´ ë˜ì–´â€ ì½˜í…ì¸ Â·ë©˜í† ë§Â·íë ˆì´ì…˜ì—ì„œ ì˜í–¥ë ¥ì´ ì»¤ì§‘ë‹ˆë‹¤.'},
  11:{label:'í†µì°°Â·ì˜ê°Â·ê· í˜•', tags:['í†µì°°','ê· í˜•','ì§„ì‹¤'],
     plus:'í•œ ë— ì°¨ì´ë¥¼ ê¿°ëš«ëŠ” ëˆˆ. ê³µì •í•œ ê¸°ì¤€ìœ¼ë¡œ ìƒí™©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.',
     minus:'ì™„ë²½ì£¼ì˜Â·ìê¸°ê²€ì—´ì´ ì‹¤í–‰ì„ ëŠ¦ì¶œ ìˆ˜ ìˆì–´ìš”. 80% ì¶œê³ Â·ì§€ì† ê°œì„ ì„ ìŠµê´€í™”í•´ ë³´ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) ê³µëª…í•˜ë©´ â€œì§„ì‹¤ë¡œ ê· í˜• ë§ì¶”ê¸°â€ê°€ ë˜ë ·í•´ì§‘ë‹ˆë‹¤. ì˜ì‚¬ê²°ì •Â·ê²€ì¦Â·í¸ì§‘ì—ì„œ ê°•í•œ ê²°ê³¼ê°€ ë‚©ë‹ˆë‹¤.'},
  22:{label:'ëŒ€ê¸°íšÂ·êµ¬í˜„Â·ë§ˆìŠ¤í„° ë¹Œë”', tags:['ì„¤ê³„','êµ¬í˜„','ìŠ¤ì¼€ì¼'],
     plus:'í° ë¹„ì „ì„ ì‹¤ì œ ì‹œìŠ¤í…œìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤. ì¥ê¸° ë¡œë“œë§µÂ·í”Œë«í¼ ì„¤ê³„ì— ê°•í•´ìš”.',
     minus:'ìŠ¤ì¼€ì¼ë§Œ í‚¤ìš°ë‹¤ ê³¼ë¶€í•˜ê°€ ì˜¬ ìˆ˜ ìˆì–´ìš”. íŒŒíŠ¸ ê´€ë¦¬ì™€ ë¦¬ìŠ¤í¬ ë¶„ì‚°ì„ ë¨¼ì € ì„¤ê³„í•´ ì£¼ì„¸ìš”.',
     synergy:'{card}ì™€(ê³¼) ë§Œë‚˜ë©´ â€œê°€ë³ê²Œ ì‹œì‘â†’ê±°ëŒ€í•œ ì‹¤í˜„â€ì˜ íë¦„ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ëŒ€í˜• í”„ë¡œì íŠ¸Â·í”Œë«í¼ êµ¬ì¶•ì—ì„œ ì™„ì£¼ë ¥ì´ ìƒê¹ë‹ˆë‹¤.'}
};

/* ---------- ê³„ì‚°/ë Œë” ---------- */
function calc(dobStr){
  const sum = dobStr ? sumDigits(dobStr) : 0;
  const lifePath = reduceNumber(sum);
  const tarot = (lifePath===22) ? TAROT[0] : TAROT[lifePath];
  return {lifePath, tarot};
}

function tryLoadImage(numList){
  return new Promise((resolve)=>{
    const frame = document.getElementById('imgframe');
    const ph = document.getElementById('placeholder');
    const old = frame.querySelector('img'); if(old) old.remove();
    function next(i){
      if(i>=numList.length){ ph.style.display='flex'; return resolve(false); }
      const src = 'cards/' + numList[i] + '.png';
      const img = new Image();
      img.onload = ()=>{ ph.style.display='none'; frame.appendChild(img); resolve(true); };
      img.onerror = ()=> next(i+1);
      img.src = src;
    }
    next(0);
  });
}

function render(dob){
  const result = document.getElementById('result');
  const lpnum = document.getElementById('lpnum');
  const lptext = document.getElementById('lptext');
  const doblabel = document.getElementById('doblabel');
  const lpplus = document.getElementById('lp-plus');
  const lpminus = document.getElementById('lp-minus');
  const lpBadges = document.getElementById('lp-badges');

  const tarotline = document.getElementById('tarotline');
  const tarotBadges = document.getElementById('tarot-badges');
  const desc = document.getElementById('desc');
  const desc2 = document.getElementById('desc2');
  const phnum = document.getElementById('phnum');
  const phname = document.getElementById('phname');

  const synBox = document.getElementById('synergyBox');
  const synTitle = document.getElementById('synTitle');
  const synBody = document.getElementById('synBody');

  const {lifePath, tarot} = calc(dob);
  result.style.display = 'block';

  // LP
  const profile = LP[lifePath];
  lpnum.textContent = lifePath;
  lptext.textContent = profile?.label || 'â€”';
  doblabel.textContent = 'ìƒì¼: ' + dob;

  lpBadges.innerHTML = '';
  (profile?.tags || []).forEach(t=>{
    const b=document.createElement('span'); b.className='badge'; b.textContent=t; lpBadges.appendChild(b);
  });
  lpplus.textContent  = profile?.plus || 'â€”';
  lpminus.textContent = profile?.minus || 'â€”';

  // Tarot
  tarotline.textContent = tarot ? (tarot.name + ' Â· ì¹´ë“œ ë²ˆí˜¸ ' + tarot.num) : 'â€”';
  tarotBadges.innerHTML='';
  (tarot?.kw || []).forEach(k=>{
    const b=document.createElement('span'); b.className='badge'; b.textContent=k; tarotBadges.appendChild(b);
  });
  desc.textContent = tarot?.desc || 'â€”';
  desc2.textContent = tarot?.desc2 || '';
  phnum.textContent = tarot?.num || 'â€“';
  phname.textContent = tarot?.name || 'ì¹´ë“œ';

  // Image
  const nums = (lifePath===22) ? [0,22] : [lifePath];
  tryLoadImage(nums);

  // Synergy (ë‘ ë°•ìŠ¤ ë°–)
  const syn = (profile?.synergy || '').replaceAll('{card}', tarot?.name || 'í•´ë‹¹ ì¹´ë“œ');
  if(syn){
    synTitle.textContent = `ì‹œë„ˆì§€: ë¼ì´í”„ íŒ¨ìŠ¤ ${lifePath} Ã— ${tarot?.name || ''}`;
    synBody.textContent = syn;
    synBox.style.display = 'block';
  }else{
    synBox.style.display = 'none';
  }

  // URL ê°±ì‹ 
  history.replaceState({}, '', location.pathname + '?dob=' + dob);
}

/* ---------- ê³µìœ  ---------- */
function onShare(){
  const url = location.href;
  const copybox = document.getElementById('copybox');
  navigator.clipboard?.writeText(url).then(()=>{
    copybox.style.display='block';
    setTimeout(()=> copybox.style.display='none', 1600);
  }).catch(()=> alert('í´ë¦½ë³´ë“œ ë³µì‚¬ê°€ ì§€ì›ë˜ì§€ ì•Šì•„ìš”. ì£¼ì†Œì°½ ë§í¬ë¥¼ ì§ì ‘ ë³µì‚¬í•´ ì£¼ì„¸ìš”.'));
}

/* ---------- ì…ë ¥ UX: ìë™ í¬ì»¤ìŠ¤ ì´ë™ ---------- */
function pad2(n){ return String(n).padStart(2,'0'); }
function main(){
  const yy=document.getElementById('yy'), mm=document.getElementById('mm'), dd=document.getElementById('dd');
  const btn=document.getElementById('calc'), shareBtn=document.getElementById('share');

  // ìë™ ìë¦¬ìˆ˜ ì±„ì›€ & í¬ì»¤ìŠ¤ ì´ë™
  const segs=[yy,mm,dd];
  segs.forEach((el,i)=>{
    el.addEventListener('input',()=>{
      const max = i===0 ? 4 : 2;
      el.value = el.value.replace(/[^\d]/g,'').slice(0,max);
      if(el.value.length===max && i<segs.length-1){ segs[i+1].focus(); }
    });
  });

  // URL dob ì ìš©
  const params = new URLSearchParams(location.search);
  const dobQ = params.get('dob');
  if(dobQ && /^\d{4}-\d{2}-\d{2}$/.test(dobQ)){
    yy.value = dobQ.slice(0,4); mm.value = dobQ.slice(5,7); dd.value = dobQ.slice(8,10);
    render(dobQ);
  }

  btn.addEventListener('click', ()=>{
    const y = yy.value.trim(), m = mm.value.trim(), d = dd.value.trim();
    if(y.length!==4 || m.length!==2 || d.length!==2){ alert('ìƒë…„ì›”ì¼ì„ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.\n(ì˜ˆ: 2001Â·08Â·15)'); return; }
    const dob = `${y}-${pad2(m)}-${pad2(d)}`;
    // ìœ íš¨í•œ ë‚ ì§œ í™•ì¸
    const t = new Date(dob);
    if(isNaN(t.getTime()) || t.getFullYear()!=y*1 || (t.getMonth()+1)!=m*1 || t.getDate()!=d*1){
      alert('ìœ íš¨í•œ ë‚ ì§œê°€ ì•„ë‹ˆì—ìš”. ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.'); return;
    }
    render(dob);
  });

  shareBtn.addEventListener('click', onShare);
}
main();
</script>
</body>
</html>
