<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>내 타로 탄생번호 & 라이프 패스</title>
<style>
  :root{
    --bg:#F7F5FF; --bg2:#FAFAFE; --card:#FFFFFF; --ink:#222433; --muted:#6E6B7A;
    --accent:#6E65F4; --accent2:#9E91FF; --ring:rgba(158,145,255,.28);
    --soft:#F4F2FF; --soft2:#F8F7FF; --pill:#EFEAFF;
    --good:#4C3EF7; --border:#EEE8FF;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family: ui-sans-serif,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;
       background:linear-gradient(180deg,var(--bg),var(--bg2)); color:var(--ink)}
  .wrap{max-width:980px; margin:0 auto; padding:28px 18px 40px}
  .hero{padding:6px 0 18px; text-align:center}
  .title{
    font-weight:900; font-size:30px; line-height:1.15; margin:10px 0 8px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  }
  .sub{color:var(--muted); margin:0 auto 12px; max-width:680px}
  .panel{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px;
         box-shadow:0 10px 26px rgba(60,40,120,.06)}
  .controls{display:flex; gap:8px; justify-content:center; align-items:center; flex-wrap:wrap}
  .seg{display:flex; gap:8px; align-items:center}
  input.segitem{width:84px; padding:10px 12px; border:1px solid #DDD7FF; border-radius:10px; outline:none;
                font-size:16px; text-align:center; background:#fff}
  input.segitem:focus{box-shadow:0 0 0 8px var(--ring); border-color:#CFC6FF}
  button{padding:10px 14px; border:none; border-radius:11px; background:var(--accent); color:#fff;
         font-weight:800; cursor:pointer; letter-spacing:.2px}
  button:hover{filter:brightness(.97)}
  #share{background:var(--accent2)}
  .hint{color:var(--muted); margin-top:8px; text-align:center}
  .result{margin-top:16px; display:none}
  .grid{display:grid; grid-template-columns: 1.02fr 1.18fr; gap:16px}
  @media (max-width:860px){ .grid{grid-template-columns:1fr} }
  .cardbox{background:var(--soft); border:1px solid var(--border); border-radius:16px; padding:16px}
  .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .lpnum{font-size:44px; font-weight:900; color:var(--good); min-width:72px}
  .muted{color:var(--muted)}
  .k{font-weight:900}
  .badge{display:inline-block; padding:6px 10px; border-radius:999px; background:#F1EEFF; color:#4F46E5;
         border:1px solid #E6E0FF; font-weight:700; font-size:13px; margin-right:6px}
  .desc{line-height:1.78}
  .tarot-pane{display:grid; grid-template-columns:140px 1fr; gap:14px; align-items:center}
  @media (max-width:520px){ .tarot-pane{grid-template-columns:1fr} }
  .imgframe{width:140px; height:220px; border-radius:14px; background:linear-gradient(180deg,#FFF,#F6F2FF);
            border:1px solid var(--border); display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative}
  .imgframe img{width:100%; height:100%; object-fit:cover; display:block}
  .ph{display:flex; align-items:center; justify-content:center; text-align:center; padding:16px; color:#7B74B1}
  .ph .num{font-size:40px; font-weight:900; line-height:1}
  .ph .nm{font-weight:800; margin-top:6px}
  .copy{display:none; margin-top:10px; background:#F7F5FF; border:1px dashed #DAD1FF; border-radius:10px; padding:10px; color:#574F9A}
  .synergy{margin-top:16px; background:var(--soft2); border:1px solid var(--border); border-radius:14px; padding:14px 16px}
  .synergy .title2{font-weight:900; margin:0 0 6px}
  .footer{margin-top:18px; font-size:12px; color:var(--muted); text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="title">내 타로 탄생번호 & 라이프 패스</h1>
      <p class="sub">생일을 입력하면, 라이프 패스 넘버와 연결된 타로 메이저 아르카나가 자동으로 표시됩니다.</p>
      <div class="panel">
        <div class="controls">
          <div class="seg">
            <input class="segitem" id="yy" inputmode="numeric" maxlength="4" placeholder="YYYY" aria-label="연도">
            <span>·</span>
            <input class="segitem" id="mm" inputmode="numeric" maxlength="2" placeholder="MM" aria-label="월">
            <span>·</span>
            <input class="segitem" id="dd" inputmode="numeric" maxlength="2" placeholder="DD" aria-label="일">
          </div>
          <button id="calc">계산하기</button>
          <button id="share">결과 링크 복사</button>
        </div>
        <div class="hint">예) 2001·08·15</div>

        <div id="result" class="result">
          <div class="grid">
            <!-- 수비학 -->
            <div class="cardbox">
              <div class="row" style="margin-bottom:6px">
                <div class="lpnum" id="lpnum">–</div>
                <div>
                  <div><span class="k">라이프 패스 넘버</span> · <span id="lptext">—</span></div>
                  <div class="muted" id="doblabel"></div>
                </div>
              </div>
              <div id="lp-badges"></div>
              <div class="desc" id="lp-plus" style="margin-top:8px"></div>
              <div class="desc muted" id="lp-minus" style="margin-top:8px"></div>
            </div>

            <!-- 타로 -->
            <div class="cardbox">
              <div class="tarot-pane">
                <div class="imgframe" id="imgframe">
                  <div class="ph" id="placeholder">
                    <div>
                      <div class="num" id="phnum">–</div>
                      <div class="nm" id="phname">카드</div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="k" id="tarotline">—</div>
                  <div id="tarot-badges" style="margin:6px 0 4px"></div>
                  <div class="desc" id="desc">—</div>
                </div>
              </div>
            </div>
          </div>

          <!-- 시너지: 두 박스 밖, 아래에 분리 -->
          <div class="synergy" id="synergyBox" style="display:none">
            <div class="title2" id="synTitle">시너지</div>
            <div id="synBody" class="desc"></div>
          </div>

          <div class="copy" id="copybox">결과 링크가 복사되었습니다. 어디든 붙여넣어 공유하세요 😊</div>
          <div class="footer">카드 이미지를 넣으려면 이 파일과 같은 폴더에 <code>cards/숫자.png</code>를 추가하세요 (예: <code>4.png</code>). 바보 카드는 <code>0.png</code> 또는 <code>22.png</code>를 둘 다 지원합니다.</div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- 유틸 ---------- */
function sumDigits(str){ return str.split('').reduce((a,ch)=> a + (/\d/.test(ch)? Number(ch):0), 0); }
function reduceNumber(n){
  if (n===11 || n===22) return n;
  while(n>9){
    n = String(n).split('').reduce((a,b)=>a+Number(b),0);
    if (n===11 || n===22) break;
  }
  return n;
}

/* ---------- 타로 카드 데이터(조금 더 풍성한 본문) ---------- */
const TAROT = {
  0:{name:'바보 (The Fool)', num:'0/22', kw:['순수','도전','새 출발','자유'],
     desc:'일단 해보는 용기, 미지로의 발걸음. 계산보다 감각이 앞설 때 새로운 우연과 인연이 들어옵니다. “가볍게 시작”이 최고의 전략이 될 수 있어요.'},
  1:{name:'마법사 (The Magician)', num:'1', kw:['시작','창조','의지','실행'],
     desc:'재료를 모아 즉시 실행하는 조율자. 메시지·도구·타이밍을 한 점으로 모으는 힘. 머릿속 아이디어를 현실로 옮기는 속도가 핵심입니다.'},
  2:{name:'여사제 (High Priestess)', num:'2', kw:['직관','내면','비밀','지혜'],
     desc:'겉보다 속, 말보다 사이. 조용하지만 정확한 통찰로 선택의 방향을 정합니다. 기다림과 관찰이 곧 전략이 되는 시기예요.'},
  3:{name:'여황제 (The Empress)', num:'3', kw:['풍요','창조성','돌봄','자연'],
     desc:'무르익는 계절. 관계와 작업이 자연스레 풍성해집니다. “돌봄”과 “꾸준함”이 결합하면 수익화의 싹이 보이고, 몸과 생활 리듬을 돌볼수록 결과물의 질도 좋아져요.'},
  4:{name:'황제 (The Emperor)', num:'4', kw:['구조','안정','책임','리더십'],
     desc:'토대를 세우고 지키는 힘. 규칙·역할·결정을 명확히 하여 안전한 무대를 만듭니다. 장기 운영과 거버넌스에 강점.'},
  5:{name:'교황 (The Hierophant)', num:'5', kw:['전통','신뢰','가르침','멘토'],
     desc:'검증된 길과 지식의 전수. 배우고 나누며 신뢰를 쌓습니다. 기준과 원칙을 세우는 일이 먼 길을 단단히 해요.'},
  6:{name:'연인 (The Lovers)', num:'6', kw:['사랑','선택','조화','관계'],
     desc:'가치와 마음이 맞는 쪽으로의 선택. 관계의 질이 성과의 질을 결정합니다. “무엇을 하느냐”만큼 “누구와 하느냐”가 중요.'},
  7:{name:'전차 (The Chariot)', num:'7', kw:['의지','추진력','승리','집중'],
     desc:'흔들림 없이 밀어붙이는 추진력. 방향이 맞으면 속도는 자연스럽게 붙습니다. 방해 요소를 정리하고 한 방향으로 모으세요.'},
  8:{name:'힘 (Strength)', num:'8', kw:['용기','인내','자기 통제'],
     desc:'부드러운 통제가 강함의 원천. 스스로를 다스릴 때 외부의 난관도 풀립니다. 꾸준함이 만드는 지속 가능한 성과.'},
  9:{name:'은둔자 (The Hermit)', num:'9', kw:['탐구','성찰','지혜','고독'],
     desc:'잠시 멈춰 등불을 켭니다. 홀로의 시간이 해답을 비춥니다. 핵심만 남기고 번잡을 덜어내면 통찰이 또렷해져요.'},
  10:{name:'운명의 수레바퀴 (Wheel of Fortune)', num:'10', kw:['변화','흐름','전환','기회'],
     desc:'올라가기도 내려가기도 하는 바퀴. 흐름을 읽어 타이밍을 잡으면 기회가 보입니다. 집착을 놓을수록 문이 열려요.'},
  11:{name:'정의 (Justice)', num:'11', kw:['균형','공정','진실','책임'],
     desc:'저울과 검. 불균형을 바로잡고, 결과에 책임집니다. 냉정한 사실 확인과 명료한 기준 세우기가 해법.'},
  12:{name:'매달린 사람 (Hanged Man)', num:'12', kw:['관점 전환','멈춤','수용'],
     desc:'잠시 멈춤의 지혜. 다른 각도로 보면 답이 달라집니다. 내려놓음이 역설적으로 진전을 만들어요.'},
  13:{name:'죽음 (Death)', num:'13', kw:['종결','재탄생','큰 변화'],
     desc:'낡은 것을 보내 새 길을 엽니다. 끝은 시작의 다른 이름. 과감한 정리가 곧 성장의 공간이 됩니다.'},
  14:{name:'절제 (Temperance)', num:'14', kw:['중용','균형','치유','조화'],
     desc:'섞고 희석하며 비율을 맞추는 연금술. 무리하지 않는 조합이 오래갑니다. 페이스 관리가 모든 걸 살려요.'},
  15:{name:'악마 (The Devil)', num:'15', kw:['유혹','집착','패턴'],
     desc:'묶는 것은 사슬이 아니라 습관. 인식하면 절반은 풀렸습니다. 쾌락/성과의 균형 재조정.'},
  16:{name:'탑 (The Tower)', num:'16', kw:['붕괴','각성','해방'],
     desc:'견고해 보였던 틀이 무너질 때 진짜 자유가 시작. 위기는 오래된 오류를 정정하는 기회가 됩니다.'},
  17:{name:'별 (The Star)', num:'17', kw:['희망','영감','치유','비전'],
     desc:'먼 곳의 빛. 당장은 느려 보여도 방향이 맞습니다. 투명함과 회복이 성과를 부릅니다.'},
  18:{name:'달 (The Moon)', num:'18', kw:['무의식','불안','상상','직감'],
     desc:'안개 속 길. 두려움과 상상이 뒤섞입니다. 불투명함을 인정하고 작은 불빛을 따라가세요.'},
  19:{name:'태양 (The Sun)', num:'19', kw:['성취','생명력','자신감','기쁨'],
     desc:'가장 밝은 카드. 마음껏 펼치고, 나누고, 축하하세요. 드러냄이 곧 확장.'},
  20:{name:'심판 (Judgement)', num:'20', kw:['부름','회복','각성','새 삶'],
     desc:'깊은 곳에서 울리는 호출. 예전의 나를 넘어서는 순간. 정리-회복-재시작의 삼박자.'},
  21:{name:'세계 (The World)', num:'21', kw:['완성','통합','귀결','순환'],
     desc:'한 바퀴의 완성. 끝이자 다음 원의 시작. 통합된 경험이 다음 여정의 자본이 됩니다.'}
};

/* ---------- 라이프 패스 프로필 + 시너지 문구 ---------- */
const LP = {
  1:{label:'독립·개척·리더십', tags:['리더십','개척','결단'],
     plus:'앞장서 길을 만듭니다. 빠른 판단·결단이 강점이며 “먼저 시작”에서 성과가 납니다.',
     minus:'독단으로 비칠 수 있어요. 협업과 마무리 구간에 체크리스트가 효과적입니다.',
     synergy:'{card}와(과) 결합하면 “아이디어→실행”의 속도가 대폭 상승합니다. 1인 프로젝트·창업·선도적 시도에 유리합니다.'},
  2:{label:'협력·감수성·조정', tags:['협업','조율','관찰'],
     plus:'상대의 맥락을 읽어 조율합니다. 관계 안정과 신뢰 구축에 강점.',
     minus:'결정을 미루다 기회를 놓칠 수 있어요. 기준을 먼저 정해 두면 속도가 납니다.',
     synergy:'{card}의 통찰과 만나면 관찰·직관의 정밀도가 높아져 팀 의사결정이 매끄러워집니다.'},
  3:{label:'표현·창의·즐거움', tags:['표현','창의','즐거움'],
     plus:'말·글·디자인 등 표현의 불꽃이 활발합니다. 즐거움 기반의 창작에서 영향력이 커집니다.',
     minus:'흥미 중심이 되면 완성도가 흔들릴 수 있습니다. 작은 목표·주간 리듬으로 품질을 잡아주세요.',
     synergy:'{card}와(과) 만나면 아이디어가 실제 “성과물”로 풍성해집니다. 콘텐츠·브랜딩·커뮤니티에서 존재감이 커집니다.'},
  4:{label:'안정·성실·기반', tags:['기반','관리','꾸준함'],
     plus:'루틴·시스템을 세우고 지키는 힘. 장기 운영과 표준화에 강합니다.',
     minus:'변화에 둔감해질 수 있어요. 실험의 안전 레일을 만들고 시험해 보세요.',
     synergy:'{card}와(과) 만나면 “튼튼한 기반 위 확장”이 빨라집니다. 운영·매뉴얼·브랜딩에서 탄탄한 성과.'},
  5:{label:'변화·모험·자유', tags:['전환','실험','확장'],
     plus:'새 판을 빠르게 학습·적용합니다. 트렌드 적응력이 뛰어납니다.',
     minus:'루틴 붕괴·산만함 주의. 핵심 지표 1~2개로 집중도를 유지하세요.',
     synergy:'{card}와(과) 결합하면 배움과 전파의 흐름이 좋아집니다. 교육·여행·새 서비스 베타에 적합.'},
  6:{label:'돌봄·책임·조화', tags:['돌봄','책임','조화'],
     plus:'관계의 균형을 잡고 책임을 다합니다. 팀/고객 경험에 강점.',
     minus:'과잉 책임으로 번아웃 위험. 경계·분담을 명확히 하세요.',
     synergy:'{card}와(과) 만나면 “가치 정렬된 파트너십”이 성과를 견인합니다.'},
  7:{label:'탐구·분석·집중', tags:['탐구','분석','집중'],
     plus:'깊이 파고드는 연구형 기질. 본질을 포착하는 능력.',
     minus:'고립·완벽주의로 속도가 느려질 수 있어요. 실험-피드백 루프를 짧게.',
     synergy:'{card}의 추진력과 합쳐지면 “깊이+속도”가 동시에 살아납니다.'},
  8:{label:'권위·성취·재정', tags:['권위','성과','재정'],
     plus:'목표 달성·수익화에 집중합니다. 리더십·거버넌스 구축.',
     minus:'통제가 과하면 자율성이 떨어집니다. 원칙은 단단·운영은 유연하게.',
     synergy:'{card}와(과) 만나면 “부드러운 통제”로 지속 가능한 성과 관리가 가능합니다.'},
  9:{label:'포용·봉사·지혜', tags:['포용','의미','치유'],
     plus:'지혜와 공감으로 사람을 돕습니다. 장기적 신뢰 구축.',
     minus:'현실 디테일·수익성이 약해질 수 있어요. 역할/범위를 명확히.',
     synergy:'{card}와(과) 결합하면 “깊은 통찰이 빛이 되어” 콘텐츠·멘토링에서 영향력이 커집니다.'},
  11:{label:'통찰·영감·균형', tags:['통찰','균형','진실'],
     plus:'한 끗 차이를 꿰뚫는 눈. 공정한 기준으로 판단합니다.',
     minus:'완벽주의·자기검열 주의. 80% 출고·지속 개선이 답.',
     synergy:'{card}와(과) 공명하면 “진실로 균형 맞추기”가 명확해집니다. 편집·검증·의사결정에 강력.'},
  22:{label:'대기획·구현·마스터 빌더', tags:['설계','구현','스케일'],
     plus:'큰 비전을 시스템으로 구현합니다. 장기 로드맵·플랫폼 설계.',
     minus:'스케일만 키우다 과부하 위험. 파트/스테이크홀더 관리가 필수.',
     synergy:'{card}와(과) 만나면 “가볍게 시작→거대한 실현”이 가능해집니다. 대형 프로젝트·플랫폼 구축에 최적.'}
};

/* ---------- 렌더 ---------- */
function calc(dobStr){
  const sum = dobStr ? sumDigits(dobStr) : 0;
  const lifePath = reduceNumber(sum);
  const tarot = (lifePath===22) ? TAROT[0] : TAROT[lifePath];
  return {lifePath, tarot};
}

function tryLoadImage(numList){
  return new Promise((resolve)=>{
    const frame = document.getElementById('imgframe');
    const ph = document.getElementById('placeholder');
    const old = frame.querySelector('img'); if(old) old.remove();
    function next(i){
      if(i>=numList.length){ ph.style.display='flex'; return resolve(false); }
      const src = 'cards/' + numList[i] + '.png';
      const img = new Image();
      img.onload = ()=>{ ph.style.display='none'; frame.appendChild(img); resolve(true); };
      img.onerror = ()=> next(i+1);
      img.src = src;
    }
    next(0);
  });
}

function render(dob){
  const result = document.getElementById('result');
  const lpnum = document.getElementById('lpnum');
  const lptext = document.getElementById('lptext');
  const doblabel = document.getElementById('doblabel');
  const lpplus = document.getElementById('lp-plus');
  const lpminus = document.getElementById('lp-minus');
  const lpBadges = document.getElementById('lp-badges');

  const tarotline = document.getElementById('tarotline');
  const tarotBadges = document.getElementById('tarot-badges');
  const desc = document.getElementById('desc');
  const phnum = document.getElementById('phnum');
  const phname = document.getElementById('phname');

  const synBox = document.getElementById('synergyBox');
  const synTitle = document.getElementById('synTitle');
  const synBody = document.getElementById('synBody');

  const {lifePath, tarot} = calc(dob);
  result.style.display = 'block';

  // LP
  const profile = LP[lifePath];
  lpnum.textContent = lifePath;
  lptext.textContent = profile?.label || '—';
  doblabel.textContent = '생일: ' + dob;

  lpBadges.innerHTML = '';
  (profile?.tags || []).forEach(t=>{
    const b=document.createElement('span'); b.className='badge'; b.textContent=t; lpBadges.appendChild(b);
  });
  lpplus.textContent  = '강점: ' + (profile?.plus || '—');
  lpminus.textContent = '주의: ' + (profile?.minus || '—');

  // Tarot
  tarotline.textContent = tarot ? (tarot.name + ' · 카드 번호 ' + tarot.num) : '—';
  tarotBadges.innerHTML='';
  (tarot?.kw || []).forEach(k=>{
    const b=document.createElement('span'); b.className='badge'; b.textContent=k; tarotBadges.appendChild(b);
  });
  desc.textContent = tarot?.desc || '—';
  phnum.textContent = tarot?.num || '–';
  phname.textContent = tarot?.name || '카드';

  // Image
  const nums = (lifePath===22) ? [0,22] : [lifePath];
  tryLoadImage(nums);

  // Synergy (두 박스 밖)
  const syn = (profile?.synergy || '').replaceAll('{card}', tarot?.name || '해당 카드');
  if(syn){
    synTitle.textContent = `시너지: 라이프 패스 ${lifePath} × ${tarot?.name || ''}`;
    synBody.textContent = syn;
    synBox.style.display = 'block';
  }else{
    synBox.style.display = 'none';
  }

  // URL 갱신
  history.replaceState({}, '', location.pathname + '?dob=' + dob);
}

/* ---------- 공유 ---------- */
function onShare(){
  const url = location.href;
  const copybox = document.getElementById('copybox');
  navigator.clipboard?.writeText(url).then(()=>{
    copybox.style.display='block';
    setTimeout(()=> copybox.style.display='none', 1600);
  }).catch(()=> alert('클립보드 복사가 지원되지 않아요. 주소창 링크를 직접 복사해 주세요.'));
}

/* ---------- 입력 UX: 자동 포커스 이동 ---------- */
function pad2(n){ return String(n).padStart(2,'0'); }
function main(){
  const yy=document.getElementById('yy'), mm=document.getElementById('mm'), dd=document.getElementById('dd');
  const btn=document.getElementById('calc'), shareBtn=document.getElementById('share');

  // 자동 자리수 채움 & 포커스 이동
  const segs=[yy,mm,dd];
  segs.forEach((el,i)=>{
    el.addEventListener('input',()=>{
      const max = i===0 ? 4 : 2;
      el.value = el.value.replace(/[^\d]/g,'').slice(0,max);
      if(el.value.length===max && i<segs.length-1){ segs[i+1].focus(); }
    });
  });

  // URL dob 적용
  const params = new URLSearchParams(location.search);
  const dobQ = params.get('dob');
  if(dobQ && /^\d{4}-\d{2}-\d{2}$/.test(dobQ)){
    yy.value = dobQ.slice(0,4); mm.value = dobQ.slice(5,7); dd.value = dobQ.slice(8,10);
    render(dobQ);
  }

  btn.addEventListener('click', ()=>{
    const y = yy.value.trim(), m = mm.value.trim(), d = dd.value.trim();
    if(y.length!==4 || m.length!==2 || d.length!==2){ alert('생년월일을 정확히 입력해 주세요.\n(예: 2001·08·15)'); return; }
    const dob = `${y}-${pad2(m)}-${pad2(d)}`;
    // 유효한 날짜 확인
    const t = new Date(dob);
    if(isNaN(t.getTime()) || t.getFullYear()!=y*1 || (t.getMonth()+1)!=m*1 || t.getDate()!=d*1){
      alert('유효한 날짜가 아니에요. 다시 확인해 주세요.'); return;
    }
    render(dob);
  });

  shareBtn.addEventListener('click', onShare);
}
main();
</script>
</body>
</html>
