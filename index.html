<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>íƒ€ë¡œ íƒ„ìƒë²ˆí˜¸ Â· ë¼ì´í”„ íŒ¨ìŠ¤</title>
<style>
  :root{
    --bg:#FAFAFE; --card:#FFFFFF; --ink:#222433; --muted:#6B6B7A;
    --accent:#6E65F4; --accent-2:#9E91FF; --ring:rgba(158,145,255,.28);
    --soft:#F4F2FF; --soft-2:#F8F7FF; --pill:#EFEAFF; --good:#4C3EF7;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif;
       background: linear-gradient(180deg, #F7F5FF, #FAFAFE); color:var(--ink)}
  .wrap{max-width:980px; margin:0 auto; padding:28px 20px 44px}
  .hero{background: radial-gradient(1200px 400px at 50% -20%, #EFEAFF 0%, rgba(239,234,255,0) 70%);
        padding:12px 0 18px; text-align:center}
  .h1-gradient{margin:10px 0 8px; font-weight:900; letter-spacing:-.3px;
    font-size:32px; background:linear-gradient(180deg,#2F2A7F 0%, #17153E 90%);
    -webkit-background-clip:text; background-clip:text; color:transparent}
  @media (min-width:820px){ .h1-gradient{font-size:36px} }
  .sub{color:var(--muted); margin:0 auto 8px; max-width:640px}
  .panel{background:var(--card); border:1px solid #EFEFFD; border-radius:18px; padding:18px;
         box-shadow:0 10px 26px rgba(60,40,120,.06)}
  .controls{display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap; margin:10px 0 8px}
  input{width:84px; padding:10px 12px; border:1px solid #DDD7FF; border-radius:10px;
        text-align:center; font-size:16px; background:#fff; outline:none}
  input:focus{box-shadow:0 0 0 8px var(--ring); border-color:#CFC6FF}
  button{padding:10px 14px; border:none; border-radius:10px; background:var(--accent); color:#fff;
         font-weight:800; cursor:pointer; letter-spacing:.2px}
  button:hover{filter:brightness(.97)}
  #share{background:var(--accent-2); display:none}
  .result{margin-top:16px; display:none}
  .grid{display:grid; grid-template-columns:1fr; gap:14px}
  /* PCì—ì„œ íƒ€ë¡œ ì˜ì—­ì„ ë„“ê²Œ */
  @media (min-width:980px){ .grid{grid-template-columns: 1fr 1.25fr} }
  .cardbox{background:var(--soft); border:1px solid #EEE8FF; border-radius:16px; padding:18px}
  .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .lpnum{font-size:44px; font-weight:900; color:var(--good); min-width:72px}
  .muted{color:var(--muted)}
  .k{font-weight:900}
  .sec{display:inline-block; margin:14px 0 6px; padding:6px 10px; font-weight:800; font-size:13px;
       color:#5E56E6; background:#EFEAFF; border:1px solid #E6E0FF; border-radius:999px}
  .desc{line-height:1.75}
  .tarot-pane{display:grid; grid-template-columns:160px 1fr; gap:16px; align-items:center}
  @media (max-width:520px){ .tarot-pane{grid-template-columns:1fr} }
  .imgframe{width:160px; height:252px; border-radius:14px; background:linear-gradient(180deg,#FFF,#F6F2FF);
            border:1px solid #EEE8FF; display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative}
  .imgframe img{width:100%; height:100%; object-fit:cover; display:block}
  .ph{display:flex; align-items:center; justify-content:center; text-align:center; padding:16px; color:#7B74B1}
  .ph .num{font-size:40px; font-weight:900; line-height:1}
  .ph .nm{font-weight:800; margin-top:6px}
  .keywords{display:flex; gap:8px; flex-wrap:wrap; margin:8px 0}
  .kw{background:#F1EEFF; color:#4F46E5; border:1px solid #E6E0FF; padding:6px 10px; border-radius:999px; font-weight:700; font-size:13px}
  .copybox{display:none; margin-top:10px; background:#F7F5FF; border:1px dashed #DAD1FF; border-radius:10px; padding:10px; color:#574F9A}
  .footer{margin-top:22px; font-size:12px; color:var(--muted); text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="h1-gradient">ë‚´ íƒ€ë¡œ íƒ„ìƒë²ˆí˜¸ & ë¼ì´í”„ íŒ¨ìŠ¤</h1>
      <p class="sub">ìƒì¼ì„ ì…ë ¥í•˜ë©´, ë¼ì´í”„ íŒ¨ìŠ¤ ë„˜ë²„ì™€ ì—°ê²°ëœ íƒ€ë¡œ ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ê°€ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
      <div class="panel">
        <div class="controls">
          <input id="yy" maxlength="4" placeholder="YYYY" />
          <input id="mm" maxlength="2" placeholder="MM" />
          <input id="dd" maxlength="2" placeholder="DD" />
          <button id="calc">ê³„ì‚°í•˜ê¸°</button>
          <button id="share">ê²°ê³¼ ë§í¬ ë³µì‚¬</button>
        </div>
        <p class="sub" id="hint">ì˜ˆ) 2001-08-15</p>

        <div id="result" class="result">
          <div class="grid">
            <!-- ìˆ˜ë¹„í•™ -->
            <div class="cardbox">
              <div class="row">
                <div class="lpnum" id="lpnum">â€“</div>
                <div>
                  <div><span class="k">ë¼ì´í”„ íŒ¨ìŠ¤ ë„˜ë²„</span> Â· <span id="lptext">â€”</span></div>
                  <div class="muted" id="doblabel"></div>
                </div>
              </div>
              <div class="sec">ê°•ì </div>
              <div class="desc" id="lp-plus">â€”</div>
              <div class="sec">ì£¼ì˜</div>
              <div class="desc" id="lp-minus">â€”</div>
              <div class="sec">ì‹œë„ˆì§€</div>
              <div class="desc" id="lp-synergy">â€”</div>
            </div>

            <!-- íƒ€ë¡œ -->
            <div class="cardbox">
              <div class="tarot-pane">
                <div class="imgframe" id="imgframe">
                  <div class="ph" id="placeholder">
                    <div>
                      <div class="num" id="phnum">â€“</div>
                      <div class="nm" id="phname">ì¹´ë“œ</div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="k" id="tarotline">â€”</div>
                  <div class="keywords" id="keywords"></div>
                  <div class="desc" id="desc">â€”</div>
                </div>
              </div>
            </div>
          </div>

          <div class="copybox" id="copybox">ê²°ê³¼ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”. ì›í•˜ëŠ” ê³³ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš” ğŸ˜Š</div>
        </div>
      </div>

      <div class="footer">
        ì¹´ë“œ ì´ë¯¸ì§€ë¥¼ ë„£ìœ¼ë ¤ë©´ ì´ íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— <code>cards/ìˆ«ì.png</code> (ì˜ˆ: <code>4.png</code>) ì¶”ê°€. ë°”ë³´ ì¹´ë“œëŠ” <code>0.png</code> ë˜ëŠ” <code>22.png</code>.
      </div>
    </div>
  </div>

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê³µí†µ ìœ í‹¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function sumDigits(str){ return str.split('').reduce((a,ch)=> a + (/\d/.test(ch)? Number(ch):0), 0); }
function reduceNumber(n){
  if (n===11 || n===22) return n;
  while(n>9){
    n = String(n).split('').reduce((a,b)=>a+Number(b),0);
    if (n===11 || n===22) break;
  }
  return n;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ€ë¡œ 0~21 â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const TAROT = {
  0:{name:'ë°”ë³´ (The Fool)', num:'0/22', kw:['ìˆœìˆ˜','ë„ì „','ìƒˆ ì¶œë°œ','ììœ '],
     desc:'ê³„íšë³´ë‹¤ í˜¸ê¸°ì‹¬ì´ ì•ì„œëŠ” ì‹œì‘. ê°€ë²¼ìš´ ë°œê±¸ìŒì´ ìƒˆ ê¸¸ì„ ì—½ë‹ˆë‹¤. ì•ˆì „ë§(ì‘ê²Œ ì‹œì‘Â·ì§§ì€ ì‹¤í—˜)ì„ ê°–ì¶”ë©´ ë” ë©€ë¦¬ ê°€ìš”.'},
  1:{name:'ë§ˆë²•ì‚¬ (The Magician)', num:'1', kw:['ì‹œì‘','ì°½ì¡°','ì˜ì§€','ì‹¤í–‰'],
     desc:'ì•„ì´ë””ì–´ë¥¼ í˜„ì‹¤ë¡œ ì†Œí™˜í•˜ëŠ” ì¹´ë“œ. ë§Â·ì†Â·ë„êµ¬ê°€ í•˜ë‚˜ë¡œ ë§ë¬¼ë¦´ ë•Œ ì¶”ì§„ë ¥ì´ ë‚©ë‹ˆë‹¤. â€œì§€ê¸ˆ, ì—¬ê¸°ì„œâ€ ê°€ëŠ¥í•œ í•œ ê±¸ìŒë¶€í„°.'},
  2:{name:'ì—¬ì‚¬ì œ (High Priestess)', num:'2', kw:['ì§ê´€','ë‚´ë©´','ë¹„ë°€','ì§€í˜œ'],
     desc:'ê²‰ë³´ë‹¤ ì†. ì¡°ìš©í•œ ê´€ì°°ê³¼ ê¸°ë¡ì´ ì •ë‹µì— ê°€ê¹ê²Œ ë°ë ¤ê°‘ë‹ˆë‹¤. ë‹µì„ ì„œë‘ë¥´ì§€ ë§ê³  â€œì™œ ê·¸ëŸ°ê°€â€ë¥¼ ì˜¤ë˜ ë°”ë¼ë´ìš”.'},
  3:{name:'ì—¬í™©ì œ (The Empress)', num:'3', kw:['í’ìš”','ì°½ì¡°ì„±','ëŒë´„','ìì—°'],
     desc:'ë¬´ë¥´ìµëŠ” ê³„ì ˆ. ëŒë´„ê³¼ ì°½ì¡°ê°€ ë§Œë‚˜ ê²°ê³¼ë¬¼ì´ í’ì„±í•´ì§‘ë‹ˆë‹¤. ìƒí™œ ë¦¬ë“¬ì„ ëŒë³¼ìˆ˜ë¡ ì‘ì—… í’ˆì§ˆë„ ìëë‹ˆë‹¤.'},
  4:{name:'í™©ì œ (The Emperor)', num:'4', kw:['êµ¬ì¡°','ì•ˆì •','ì±…ì„','ë¦¬ë”ì‹­'],
     desc:'í‹€Â·ê·œì¹™Â·ê¶Œí•œ ë°°ë¶„ìœ¼ë¡œ ì•ˆì •ê°ì„ ë§Œë“­ë‹ˆë‹¤. ê²°ì •ì€ ëª…í™•í•˜ê²Œ, ê¸°ì¤€ì€ ì¼ê´€ë˜ê²Œ. ì‹œìŠ¤í…œì´ ì‚¬ëŒì„ ë„ì™€ì£¼ê²Œ í•˜ì„¸ìš”.'},
  5:{name:'êµí™© (The Hierophant)', num:'5', kw:['ì „í†µ','ì‹ ë¢°','ê°€ë¥´ì¹¨','ë©˜í† '],
     desc:'ë¯¿ì„ ë§Œí•œ ê¸¸ì¡ì´. ë°°ìš´ ê²ƒì„ ë°”íƒ•ìœ¼ë¡œ ì „í•˜ê³  ì—°ê²°í•©ë‹ˆë‹¤. â€œì˜ë¯¸â€ê°€ ë¶„ëª…í• ìˆ˜ë¡ ì§€ì§€ê°€ ëª¨ì…ë‹ˆë‹¤.'},
  6:{name:'ì—°ì¸ (The Lovers)', num:'6', kw:['ì‚¬ë‘','ì„ íƒ','ê°€ì¹˜ì •ë ¬'],
     desc:'ì¤‘ìš”í•œ ì„ íƒ. ë‚˜ì˜ ê°€ì¹˜ì™€ ë°©í–¥ì´ ë§ëŠ”ì§€ ì ê²€í•˜ì„¸ìš”. ê´€ê³„Â·í˜‘ì—…ì€ â€œê°™ì€ ì´ìœ â€ë¥¼ ì°¾ì„ ë•Œ ì˜¤ë˜ê°‘ë‹ˆë‹¤.'},
  7:{name:'ì „ì°¨ (The Chariot)', num:'7', kw:['ì˜ì§€','ì¶”ì§„ë ¥','ì§‘ì¤‘','ìŠ¹ë¦¬'],
     desc:'í”ë“¤ë¦¼ ì—†ì´ ì „ì§„. ì†ë„ë³´ë‹¤ ë°©í–¥ ìœ ì§€ê°€ ìŠ¹ë¦¬ì˜ í•µì‹¬ì…ë‹ˆë‹¤. ë¶„ì‚°ë˜ëŠ” ì¼ì€æœæ–­íˆ ëœì–´ë‚´ì„¸ìš”.'},
  8:{name:'í˜ (Strength)', num:'8', kw:['ìš©ê¸°','ì¸ë‚´','ìê¸° í†µì œ'],
     desc:'ë¶€ë“œëŸ¬ìš´ í†µì œ. ìŠ¤ìŠ¤ë¡œë¥¼ ë‹¤ìŠ¤ë¦´ ë•Œ ì™¸ë¶€ì˜ ë‚œê´€ì´ í’€ë¦½ë‹ˆë‹¤. í•œ ë°•ì ì²œì²œíˆ, ê·¸ëŸ¬ë‚˜ ëŠê¸°ì§€ ì•Šê²Œ.'},
  9:{name:'ì€ë‘”ì (The Hermit)', num:'9', kw:['íƒêµ¬','ì„±ì°°','ì§€í˜œ'],
     desc:'ë“±ë¶ˆ í•˜ë‚˜ ë“¤ê³  ë©ˆì¶¤. í˜¼ìì„œì˜ ì‹œê°„ì´ í•´ë‹µì„ ë¹„ì¶¥ë‹ˆë‹¤. ì†ŒìŒì—ì„œ ë²—ì–´ë‚˜ í•µì‹¬ ì§ˆë¬¸ì„ ë¶™ì¡ìœ¼ì„¸ìš”.'},
  10:{name:'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´ (Wheel of Fortune)', num:'10', kw:['ë³€í™”','ìˆœí™˜','ê¸°íšŒ'],
     desc:'ì˜¤ë¥´ë‚´ë¦¬ëŠ” ë°”í€´. íë¦„ì„ ì½ê³  íƒ€ì´ë°ì„ ì¡ìœ¼ì„¸ìš”. ì§‘ì°©ì„ ë‚´ë ¤ë†“ìœ¼ë©´ ìš°ì—°ì´å‘³æ–¹í•©ë‹ˆë‹¤.'},
  11:{name:'ì •ì˜ (Justice)', num:'11', kw:['ê· í˜•','ê³µì •','ì§„ì‹¤','ì±…ì„'],
     desc:'ì €ìš¸ì˜ ê· í˜•. ì‚¬ì‹¤Â·ì¦ê±°Â·ì›ì¹™ì— ê¸°ëŒ€ì–´ íŒë‹¨í•˜ì„¸ìš”. â€œê´œì°®ë‹¤â€ì™€ â€œì•ˆ ëœë‹¤â€ì˜ ì„ ì„ ë˜ë ·í•˜ê²Œ.'},
  12:{name:'ë§¤ë‹¬ë¦° ì‚¬ëŒ (Hanged Man)', num:'12', kw:['ê´€ì ì „í™˜','ë©ˆì¶¤','ìˆ˜ìš©'],
     desc:'ì ì‹œ ê±°ê¾¸ë¡œ ë³´ê¸°. ë‚´ë ¤ë†“ìŒì´ ì§„ì „ì„ ë¶€ë¦…ë‹ˆë‹¤. ì§€ê¸ˆì€ ì†ë„ê°€ ì•„ë‹ˆë¼ ê°ë„ê°€ í•„ìš”í•´ìš”.'},
  13:{name:'ì£½ìŒ (Death)', num:'13', kw:['ì¢…ê²°','ì¬íƒ„ìƒ','í° ë³€í™”'],
     desc:'ëì€ ì‹œì‘ì˜ ë‹¤ë¥¸ ì´ë¦„. ì˜¤ë˜ëœ ê²ƒì„ ë³´ë‚´ ìƒˆ ìë¦¬ë¥¼ ë§Œë“œì„¸ìš”. ë¹„ì›Œì•¼ ë“¤ì–´ì˜µë‹ˆë‹¤.'},
  14:{name:'ì ˆì œ (Temperance)', num:'14', kw:['ì¡°í™”','ì¤‘ìš©','ê· í˜•','ì¹˜ìœ '],
     desc:'ì„ê³  í¬ì„í•´ ë§ì¶”ëŠ” ê¸°ìˆ . ë¬´ë¦¬í•˜ì§€ ì•ŠëŠ” ì¡°í•©ì´ ì˜¤ë˜ ê°‘ë‹ˆë‹¤. ë¦¬ë“¬Â·ìˆ˜ë©´Â·ìŒì‹ ê°™ì€ ê¸°ë³¸ì´ íš¨ìœ¨ì„ ë§Œë“­ë‹ˆë‹¤.'},
  15:{name:'ì•…ë§ˆ (The Devil)', num:'15', kw:['ìœ í˜¹','ì§‘ì°©','íŒ¨í„´'],
     desc:'ë¬¶ëŠ” ê±´ ì‚¬ìŠ¬ì´ ì•„ë‹ˆë¼ ìŠµê´€. ì¸ì‹í•˜ë©´ ì ˆë°˜ì€ í’€ë ¸ìŠµë‹ˆë‹¤. ì¾Œë½Â·ë¶ˆì•ˆ ë£¨í”„ì˜ ìŠ¤ìœ„ì¹˜ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.'},
  16:{name:'íƒ‘ (The Tower)', num:'16', kw:['ë¶•ê´´','ê°ì„±','í•´ë°©'],
     desc:'ê²¬ê³ í•´ ë³´ì´ë˜ ê²ƒì´ ë¬´ë„ˆì§ˆ ë•Œ, ì§„ì§œ ììœ ê°€ ì‹œì‘ë©ë‹ˆë‹¤. ë¬´ë„ˆì§„ ìë¦¬ì—” ë” ì§„ì‹¤í•œ êµ¬ì¡°ê°€ ì„œìš”.'},
  17:{name:'ë³„ (The Star)', num:'17', kw:['í¬ë§','ì˜ê°','íšŒë³µ','ë¹„ì „'],
     desc:'ë¨¼ ê³³ì˜ ë¹›. íšŒë³µê³¼ ì˜ê°ì˜ ì‹œê°„ì´ ì´ì–´ì§‘ë‹ˆë‹¤. ì¡°ê¸‰í•´í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.'},
  18:{name:'ë‹¬ (The Moon)', num:'18', kw:['ë¬´ì˜ì‹','ë¶ˆì•ˆ','ìƒìƒ','ì§ê°'],
     desc:'ì•ˆê°œ ì† ê¸¸. ë‘ë ¤ì›€ê³¼ ìƒìƒì´ ë’¤ì„ì…ë‹ˆë‹¤. ì‚¬ì‹¤ ì²´í¬ì™€ ì§ê°ì˜ ê· í˜•ì„ ì¡ìœ¼ì„¸ìš”.'},
  19:{name:'íƒœì–‘ (The Sun)', num:'19', kw:['ì„±ì·¨','ìì‹ ê°','ê¸°ì¨','ë‚™ê´€'],
     desc:'ê°€ì¥ ë°ì€ ì¹´ë“œ. í¼ì¹˜ê³  ë‚˜ëˆ„ê³  ì¶•í•˜í•˜ì„¸ìš”. í™œë ¥ì€ ê¸°íšŒë¥¼ ë¶€ë¦…ë‹ˆë‹¤.'},
  20:{name:'ì‹¬íŒ (Judgement)', num:'20', kw:['ë¶€ë¦„','ê°ì„±','íšŒë³µ','ìƒˆ ì‚¶'],
     desc:'ê¹Šì€ ê³³ì—ì„œ ë¶€ë¥´ëŠ” ì†Œë¦¬. ì˜ˆì „ì˜ ë‚˜ë¥¼ ë„˜ì–´ì„­ë‹ˆë‹¤. ì†Œëª…ì— ì‘ë‹µí•  íƒ€ì´ë°.'},
  21:{name:'ì„¸ê³„ (The World)', num:'21', kw:['ì™„ì„±','í†µí•©','ê·€ê²°','ìˆœí™˜'],
     desc:'í•œ ë°”í€´ì˜ ì™„ì£¼. ë‹«í˜ê³¼ ë™ì‹œì— ë‹¤ìŒ ì›ì´ ì‹œì‘ë¼ìš”. ê°ì‚¬ë¡œ ë§ˆë¬´ë¦¬í•˜ë©´ ë‹¤ìŒ ë‹¨ê³„ê°€ ë§¤ë„ëŸ½ìŠµë‹ˆë‹¤.'}
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë¼ì´í”„ íŒ¨ìŠ¤(1~9, 11, 22) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const LP_LABEL = {
  1:'ë…ë¦½Â·ê°œì²™Â·ë¦¬ë”ì‹­', 2:'í˜‘ë ¥Â·ê°ìˆ˜ì„±Â·ì¡°ì •', 3:'í‘œí˜„Â·ì°½ì˜Â·ì¦ê±°ì›€', 4:'ì•ˆì •Â·ì„±ì‹¤Â·ê¸°ë°˜',
  5:'ë³€í™”Â·ëª¨í—˜Â·ììœ ', 6:'ëŒë´„Â·ì±…ì„Â·ì¡°í™”', 7:'íƒêµ¬Â·ë¶„ì„Â·ì§‘ì¤‘', 8:'ê¶Œìœ„Â·ì„±ì·¨Â·ì¬ì •',
  9:'í¬ìš©Â·ë´‰ì‚¬Â·ì§€í˜œ', 11:'í†µì°°Â·ì˜ê°Â·ì§ê´€', 22:'ëŒ€ê¸°íšÂ·êµ¬í˜„Â·ë§ˆìŠ¤í„° ë¹Œë”'
};

const EXPLAINS = {
  1:{ plus:'ì„ ë´‰ì— ì„œì„œ ê¸¸ì„ ì—¬ëŠ” í˜. ê²°ì •ì´ ë¹ ë¥´ê³  ì¶”ì§„ì´ ê²½ì¾Œí•©ë‹ˆë‹¤. ëª©í‘œê°€ ë¶„ëª…í• ìˆ˜ë¡ ë¶ˆí•„ìš”í•œ ì†Œëª¨ê°€ ì¤„ì–´ìš”.',
      minus:'ë…ë‹¨Â·ì†ì „ì†ê²°ë¡œ ê´€ê³„ê°€ ì†Œëª¨ë  ìˆ˜ ìˆì–´ìš”. í”¼ë“œë°± ë£¨í‹´ê³¼ íœ´ì‹ ìŠ¬ë¡¯ì„ ì¼ì •ì— ë¬¶ì–´ë‘ì„¸ìš”.',
      synergy:'{card}ì™€ ë§Œë‚˜ë©´ â€œì•„ì´ë””ì–´â†’ì‹¤í–‰â€ì´ ê°€ì†í•©ë‹ˆë‹¤. 1ì¸ í”„ë¡œì íŠ¸Â·ì°½ì—…Â·ì„ ë„ì  ì‹œë„ì— ìœ ë¦¬í•©ë‹ˆë‹¤.' },
  2:{ plus:'ì¡°ìœ¨Â·ì¤‘ì¬Â·ê²½ì²­ì˜ ë‹¬ì¸. ë¯¸ë¬˜í•œ ë¶„ìœ„ê¸°ë¥¼ ì½ì–´ ê°ˆë“±ì„ ë¶€ë“œëŸ½ê²Œ í’€ì–´ëƒ…ë‹ˆë‹¤.',
      minus:'ê²°ì •ì„ ë¯¸ë£¨ë‹¤ íƒ€ì´ë°ì„ ë†“ì¹˜ê¸° ì‰¬ì›Œìš”. â€œì˜ê²¬ ìˆ˜ì§‘ â†’ ë§ˆê°ì‹œí•œ â†’ ê²°ì •â€ 3ë‹¨ê³„ë¥¼ ìŠµê´€í™”í•˜ì„¸ìš”.',
      synergy:'{card}ì™€ í•¨ê»˜ë©´ ì§ê´€Â·ê´€ì°°ì´ ì •ë°€í•´ì ¸ ë¦¬ì„œì¹˜Â·ìƒë‹´Â·ê²€ì¦ ë‹¨ê³„ì—ì„œ ê°•ì ì„ ë³´ì…ë‹ˆë‹¤.' },
  3:{ plus:'í‘œí˜„ê³¼ ì°½ì˜ì˜ ë¶ˆê½ƒ. ë§Â·ê¸€Â·ë””ìì¸ ê°™ì€ í‘œí˜„ì´ ì‚´ì•„ë‚©ë‹ˆë‹¤. ì¦ê±°ì›€ì´ ì¼ì˜ ë™ë ¥ì´ì—ìš”.',
      minus:'í¥ë¯¸ ìœ„ì£¼ë¡œ íë¥´ë©´ ì™„ì„±ë„ê°€ í”ë“¤ë¦½ë‹ˆë‹¤. ì‘ì€ ëª©í‘œÂ·ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë¦¬ë“¬ì„ ê³ ì •í•˜ì„¸ìš”.',
      synergy:'{card}ì™€ ì´ì–´ì§€ëŠ” íë¦„ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ í‘œí˜„Â·ì°½ì˜Â·ì¦ê±°ì›€ ê¸°ì§ˆì´ ë‘ë“œëŸ¬ì ¸ ì•„ì´ë””ì–´ê°€ â€˜ì‹¤ë¬¼â€™ë¡œ ìëë‹ˆë‹¤.' },
  4:{ plus:'ë£¨í‹´ê³¼ ì‹œìŠ¤í…œ êµ¬ì¶•. ê¾¸ì¤€í•¨ìœ¼ë¡œ ì‹ ë¢°ë¥¼ ìŒ“ê³  ê¸°ë°˜ì„ ë‹¤ì§‘ë‹ˆë‹¤.',
      minus:'ë³€í™” ì €í•­ì´ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”. â€œì‘ì€ ì‹¤í—˜â€ì„ ì•ˆì „ ìŠ¬ë¡¯ìœ¼ë¡œ ë‘ê³  ê°œì„ ì˜ ì—¬ì§€ë¥¼ ë‚¨ê²¨ë‘ì„¸ìš”.',
      synergy:'{card}ì™€ ê²°í•©í•˜ë©´ ìš´ì˜Â·ë¸Œëœë”©Â·í‘œì¤€í™” ì„±ê³¼ê°€ ì»¤ì§‘ë‹ˆë‹¤. í† ëŒ€ ìœ„ì˜ ì„±ì¥.' },
  5:{ plus:'ì „í™˜Â·íƒí—˜Â·ì ì‘ì˜ ê³ ìˆ˜. ìƒˆ íŒì„ ì§œê³  íŠ¸ë Œë“œë¥¼ ë¹ ë¥´ê²Œ í¡ìˆ˜í•©ë‹ˆë‹¤.',
      minus:'ë£¨í‹´ ë¶•ê´´Â·ì‚°ë§Œí•¨ì— ì·¨ì•½. â€œí•µì‹¬ 1ê°œ + ì„ íƒ 1ê°œâ€ë§Œ ì§‘ì¤‘í•´ë„ ì„±ê³¼ê°€ ë‚©ë‹ˆë‹¤.',
      synergy:'{card}ì™€ í•¨ê»˜ë©´ ë°°ì›€ê³¼ ì „íŒŒì˜ íë¦„ì´ ê°•í•´ì ¸ êµìœ¡Â·ì—¬í–‰Â·ë² íƒ€ëŸ°ì¹­ì— ìœ ë¦¬í•©ë‹ˆë‹¤.' },
  6:{ plus:'ëŒë´„Â·ì±…ì„Â·ê´€ê³„ì˜ ê· í˜•. íŒ€ì„ í¸ì•ˆíˆ ë¬¶ì–´ì£¼ëŠ” ì‹ ë¢°ì˜ ì¶•ì…ë‹ˆë‹¤.',
      minus:'ê³¼ì‰ ì±…ì„ìœ¼ë¡œ ë²ˆì•„ì›ƒ ìœ„í—˜. â€œë‚´ ëª«Â·ë‚¨ì˜ ëª«Â·ê³µìœ  ëª«â€ ê²½ê³„ë¥¼ ì„ ëª…íˆ í•˜ì„¸ìš”.',
      synergy:'{card}ì™€ ë§Œë‚˜ë©´ ê°€ì¹˜ ì •ë ¬ëœ íŒŒíŠ¸ë„ˆì‹­ì´ ì„±ê³¼ë¥¼ ê²¬ì¸í•©ë‹ˆë‹¤. CX/ì»¤ë®¤ë‹ˆí‹°ì— ê°•ì .' },
  7:{ plus:'ê¹Šì´Â·ë¶„ì„Â·ì„±ì°°. ë³¸ì§ˆì„ íŒŒê³ ë“œëŠ” ì§‘ì¤‘ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤.',
      minus:'ê³¼ë„í•œ ê³ ë¦½Â·ì™„ë²½ì£¼ì˜ë¡œ ì‹¤í–‰ì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. 80% ê°€ì„¤ë¡œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.',
      synergy:'{card}ì˜ ì¶”ì§„ë ¥ê³¼ ë§Œë‚˜ë©´ â€œê¹Šì´+ì†ë„â€ê°€ ë™ì‹œì— ì‚´ì•„ë‚©ë‹ˆë‹¤. ì „ëµÂ·ë°ì´í„° ë¶„ì„ ìµœì .' },
  8:{ plus:'ëª©í‘œÂ·ì„±ê³¼Â·ì¬ì • ê°ê°. ë¦¬ë”ì‹­ê³¼ ê±°ë²„ë„ŒìŠ¤ë¡œ í° ê·¸ë¦¼ì„ êµ´ë¦½ë‹ˆë‹¤.',
      minus:'í†µì œê°€ ê³¼í•´ì§€ë©´ ììœ¨ì„±ì´ ë–¨ì–´ì ¸ ì„±ì¥ì„±ì´ ë‘”í™”ë©ë‹ˆë‹¤. ê¶Œí•œ ìœ„ì„Â·OKRë¡œ ê· í˜•ì„ ì¡ìœ¼ì„¸ìš”.',
      synergy:'{card}ì™€ ê²°í•©í•˜ë©´ â€œë¶€ë“œëŸ¬ìš´ í†µì œâ€ë¡œ ì§€ì† ê°€ëŠ¥í•œ ì„±ê³¼ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.' },
  9:{ plus:'í¬ìš©Â·ì¹˜ìœ Â·ì§€í˜œ. í° ê·¸ë¦¼ì—ì„œ ì˜ë¯¸ë¥¼ ì°¾ê³  ê°€ì¹˜ë¥¼ ì „í•©ë‹ˆë‹¤.',
      minus:'ì´ìƒí™”ë¡œ í˜„ì‹¤ ë””í…Œì¼ì„ ë†“ì¹  ìˆ˜ ìˆì–´ìš”. ì²´í¬ë¦¬ìŠ¤íŠ¸Â·ë§ˆê°ìœ¼ë¡œ í˜„ì‹¤ ë‹»ì„ ë‚´ë¦¬ì„¸ìš”.',
      synergy:'{card}ì™€ ë§Œë‚˜ë©´ â€œë‚´ì  í†µì°° â†’ íƒ€ì¸ì—ê²Œ ë¹„ì¶˜ ë“±ë¶ˆâ€ì´ ë©ë‹ˆë‹¤. ë©˜í† ë§Â·íë ˆì´ì…˜ì— ê°•ì .' },
  11:{ plus:'í†µì°°Â·ì˜ê°Â·ê· í˜• ê°ê°. ë³µì¡í•œ ì‚¬ì•ˆì˜ ì¤‘ì‹¬ì„ ì •í™•íˆ ì§šìŠµë‹ˆë‹¤.',
      minus:'ì˜ˆë¯¼í•¨Â·ì™„ë²½ì£¼ì˜ê°€ ì²´ë ¥ì„ ê¹ì„ ìˆ˜ ìˆì–´ìš”. ë¦¬ë“¬Â·íšŒë³µ ìŠ¬ë¡¯ì„ ìš°ì„  ë°°ì¹˜í•˜ì„¸ìš”.',
      synergy:'{card}ì™€ ê³µëª…í•˜ë©´ â€œê³µì •Â·ê· í˜•â€ ê¸°ì¤€ìœ¼ë¡œ ì˜ì‚¬ê²°ì •ì´ ë˜ë ·í•´ì§‘ë‹ˆë‹¤.' },
  22:{ plus:'ë§ˆìŠ¤í„° ë¹Œë”. ëŒ€ê¸°íšì„ â€œì‘ë™í•˜ëŠ” ì‹œìŠ¤í…œâ€ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.',
      minus:'ìŠ¤ì¼€ì¼ë§Œ í‚¤ìš°ë‹¤ ì¢Œì´ˆ ìœ„í—˜. íŒŒíŠ¸Â·ìŠ¤í…Œì´í¬í™€ë” ê´€ë¦¬ì™€ ë‹¨ê³„ì  ë¡¤ì•„ì›ƒì´ í•„ìˆ˜.',
      synergy:'{card}ì™€ ë§Œë‚˜ë©´ â€œê°€ë³ê²Œ ì‹œì‘â†’ê±°ëŒ€í•œ ì‹¤í˜„â€ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤. í”Œë«í¼Â·ëŒ€í˜• í”„ë¡œì íŠ¸ì— ìµœì .' }
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë Œë”ë§ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function calc(dobStr){
  const lifePath = reduceNumber(sumDigits(dobStr || ''));
  const tarot = (lifePath===22) ? TAROT[0] : TAROT[lifePath];
  return {lifePath, tarot};
}

function tryLoadImage(numList){
  return new Promise((resolve)=>{
    const frame = document.getElementById('imgframe');
    const ph = document.getElementById('placeholder');
    const old = frame.querySelector('img'); if(old) old.remove();
    function next(i){
      if(i>=numList.length){ ph.style.display='flex'; return resolve(false); }
      const img = new Image(); img.src = 'cards/' + numList[i] + '.png';
      img.onload = ()=>{ ph.style.display='none'; frame.appendChild(img); resolve(true); };
      img.onerror = ()=> next(i+1);
    } next(0);
  });
}

function render(dob){
  const result = document.getElementById('result');
  const lpnum = document.getElementById('lpnum');
  const lptext = document.getElementById('lptext');
  const plus = document.getElementById('lp-plus');
  const minus = document.getElementById('lp-minus');
  const syn = document.getElementById('lp-synergy');
  const doblabel = document.getElementById('doblabel');
  const tarotline = document.getElementById('tarotline');
  const keywords = document.getElementById('keywords');
  const desc = document.getElementById('desc');
  const phnum = document.getElementById('phnum');
  const phname = document.getElementById('phname');
  const shareBtn = document.getElementById('share');
  const copybox = document.getElementById('copybox');

  const {lifePath, tarot} = calc(dob);
  result.style.display='block'; copybox.style.display='none';

  lpnum.textContent = lifePath;
  lptext.textContent = LP_LABEL[lifePath] || 'â€”';
  doblabel.textContent = 'ìƒì¼: ' + dob;

  const ex = EXPLAINS[lifePath];
  plus.textContent  = ex?.plus || 'â€”';
  minus.textContent = ex ? ('ì£¼ì˜: ' + ex.minus) : 'â€”';
  syn.textContent   = (ex?.synergy || 'â€”').replaceAll('{card}', tarot?.name || 'í•´ë‹¹ ì¹´ë“œ');

  tarotline.textContent = tarot ? (tarot.name + ' Â· ì¹´ë“œ ë²ˆí˜¸ ' + tarot.num) : 'â€”';
  keywords.innerHTML = '';
  (tarot?.kw || []).forEach(k=>{
    const span = document.createElement('span'); span.className='kw'; span.textContent=k; keywords.appendChild(span);
  });
  desc.textContent = tarot?.desc || 'â€”';
  phnum.textContent = tarot?.num || 'â€“';
  phname.textContent = tarot?.name || 'ì¹´ë“œ';

  const nums = (lifePath===22) ? [0,22] : [lifePath];
  tryLoadImage(nums);
  shareBtn.style.display='inline-block';
  history.replaceState({}, '', location.pathname + '?dob=' + dob);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì…ë ¥/ê³µìœ  â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function onShare(){
  const copybox = document.getElementById('copybox');
  navigator.clipboard?.writeText(location.href).then(()=>{
    copybox.style.display='block'; setTimeout(()=> copybox.style.display='none', 1800);
  }).catch(()=> alert('í´ë¦½ë³´ë“œ ë³µì‚¬ê°€ ì§€ì›ë˜ì§€ ì•Šì•„ìš”. ì£¼ì†Œì°½ ë§í¬ë¥¼ ë³µì‚¬í•´ì£¼ì„¸ìš”.'));
}

function main(){
  const yy=document.getElementById('yy'), mm=document.getElementById('mm'), dd=document.getElementById('dd');
  const btn=document.getElementById('calc'); const shareBtn=document.getElementById('share');

  // ìˆ«ì ì…ë ¥ ì‹œ ë‹¤ìŒ ì¹¸ìœ¼ë¡œ
  [yy,mm,dd].forEach((el,i)=>{
    el.addEventListener('input', ()=>{
      const max = i===0 ? 4 : 2;
      el.value = el.value.replace(/[^\d]/g,'').slice(0,max);
      if(el.value.length===max && i<2) [yy,mm,dd][i+1].focus();
    });
  });

  // URL íŒŒë¼ë¯¸í„° dob=yyyy-mm-dd
  const q = new URLSearchParams(location.search).get('dob');
  if(q && /^\d{4}-\d{2}-\d{2}$/.test(q)){ yy.value=q.slice(0,4); mm.value=q.slice(5,7); dd.value=q.slice(8,10); render(q); }

  btn.addEventListener('click', ()=>{
    const y=yy.value.trim(), m=mm.value.trim(), d=dd.value.trim();
    if(y.length!==4 || m.length!==2 || d.length!==2) return alert('ìƒë…„ì›”ì¼ì„ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.\nì˜ˆ: 2001-08-15');
    const dob = `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
    const t = new Date(dob);
    if(isNaN(t.getTime()) || t.getFullYear()!=+y || (t.getMonth()+1)!=+m || t.getDate()!=+d) return alert('ìœ íš¨í•œ ë‚ ì§œê°€ ì•„ë‹ˆì—ìš”. ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”.');
    render(dob);
  });

  shareBtn.addEventListener('click', onShare);
}
main();
</script>
</body>
</html>
