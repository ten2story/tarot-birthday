<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>타로 탄생번호 · 라이프 패스</title>
<style>
  :root{
    --bg:#FAFAFE; --card:#FFFFFF; --ink:#222433; --muted:#6B6B7A;
    --accent:#6E65F4; --accent-2:#9E91FF; --ring:rgba(158,145,255,.28);
    --soft:#F4F2FF; --soft-2:#F8F7FF; --pill:#EFEAFF; --good:#4C3EF7;
  }
  *{box-sizing:border-box}
  body{margin:0; font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif;
       background: linear-gradient(180deg, #F7F5FF, #FAFAFE); color:var(--ink)}
  .wrap{max-width:980px; margin:0 auto; padding:28px 20px 44px}
  .hero{background: radial-gradient(1200px 400px at 50% -20%, #EFEAFF 0%, rgba(239,234,255,0) 70%);
        padding:12px 0 18px; text-align:center}
  .h1-gradient{margin:10px 0 8px; font-weight:900; letter-spacing:-.3px;
    font-size:32px; background:linear-gradient(180deg,#2F2A7F 0%, #17153E 90%);
    -webkit-background-clip:text; background-clip:text; color:transparent}
  @media (min-width:820px){ .h1-gradient{font-size:36px} }
  .sub{color:var(--muted); margin:0 auto 8px; max-width:640px}
  .panel{background:var(--card); border:1px solid #EFEFFD; border-radius:18px; padding:18px;
         box-shadow:0 10px 26px rgba(60,40,120,.06)}
  .controls{display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap; margin:10px 0 8px}
  input{width:84px; padding:10px 12px; border:1px solid #DDD7FF; border-radius:10px;
        text-align:center; font-size:16px; background:#fff; outline:none}
  input:focus{box-shadow:0 0 0 8px var(--ring); border-color:#CFC6FF}
  button{padding:10px 14px; border:none; border-radius:10px; background:var(--accent); color:#fff;
         font-weight:800; cursor:pointer; letter-spacing:.2px}
  button:hover{filter:brightness(.97)}
  #share{background:var(--accent-2); display:none}
  .result{margin-top:16px; display:none}
  .grid{display:grid; grid-template-columns:1fr; gap:14px}
  /* PC에서 타로 영역을 넓게 */
  @media (min-width:980px){ .grid{grid-template-columns: 1fr 1.25fr} }
  .cardbox{background:var(--soft); border:1px solid #EEE8FF; border-radius:16px; padding:18px}
  .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .lpnum{font-size:44px; font-weight:900; color:var(--good); min-width:72px}
  .muted{color:var(--muted)}
  .k{font-weight:900}
  .sec{display:inline-block; margin:14px 0 6px; padding:6px 10px; font-weight:800; font-size:13px;
       color:#5E56E6; background:#EFEAFF; border:1px solid #E6E0FF; border-radius:999px}
  .desc{line-height:1.75}
  .tarot-pane{display:grid; grid-template-columns:160px 1fr; gap:16px; align-items:center}
  @media (max-width:520px){ .tarot-pane{grid-template-columns:1fr} }
  .imgframe{width:160px; height:252px; border-radius:14px; background:linear-gradient(180deg,#FFF,#F6F2FF);
            border:1px solid #EEE8FF; display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative}
  .imgframe img{width:100%; height:100%; object-fit:cover; display:block}
  .ph{display:flex; align-items:center; justify-content:center; text-align:center; padding:16px; color:#7B74B1}
  .ph .num{font-size:40px; font-weight:900; line-height:1}
  .ph .nm{font-weight:800; margin-top:6px}
  .keywords{display:flex; gap:8px; flex-wrap:wrap; margin:8px 0}
  .kw{background:#F1EEFF; color:#4F46E5; border:1px solid #E6E0FF; padding:6px 10px; border-radius:999px; font-weight:700; font-size:13px}
  .copybox{display:none; margin-top:10px; background:#F7F5FF; border:1px dashed #DAD1FF; border-radius:10px; padding:10px; color:#574F9A}
  .footer{margin-top:22px; font-size:12px; color:var(--muted); text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1 class="h1-gradient">내 타로 탄생번호 & 라이프 패스</h1>
      <p class="sub">생일을 입력하면, 라이프 패스 넘버와 연결된 타로 메이저 아르카나가 자동으로 표시됩니다.</p>
      <div class="panel">
        <div class="controls">
          <input id="yy" maxlength="4" placeholder="YYYY" />
          <input id="mm" maxlength="2" placeholder="MM" />
          <input id="dd" maxlength="2" placeholder="DD" />
          <button id="calc">계산하기</button>
          <button id="share">결과 링크 복사</button>
        </div>
        <p class="sub" id="hint">예) 2001-08-15</p>

        <div id="result" class="result">
          <div class="grid">
            <!-- 수비학 -->
            <div class="cardbox">
              <div class="row">
                <div class="lpnum" id="lpnum">–</div>
                <div>
                  <div><span class="k">라이프 패스 넘버</span> · <span id="lptext">—</span></div>
                  <div class="muted" id="doblabel"></div>
                </div>
              </div>
              <div class="sec">강점</div>
              <div class="desc" id="lp-plus">—</div>
              <div class="sec">주의</div>
              <div class="desc" id="lp-minus">—</div>
              <div class="sec">시너지</div>
              <div class="desc" id="lp-synergy">—</div>
            </div>

            <!-- 타로 -->
            <div class="cardbox">
              <div class="tarot-pane">
                <div class="imgframe" id="imgframe">
                  <div class="ph" id="placeholder">
                    <div>
                      <div class="num" id="phnum">–</div>
                      <div class="nm" id="phname">카드</div>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="k" id="tarotline">—</div>
                  <div class="keywords" id="keywords"></div>
                  <div class="desc" id="desc">—</div>
                </div>
              </div>
            </div>
          </div>

          <div class="copybox" id="copybox">결과 링크가 복사되었어요. 원하는 곳에 붙여넣기 하세요 😊</div>
        </div>
      </div>

      <div class="footer">
        카드 이미지를 넣으려면 이 파일과 같은 폴더에 <code>cards/숫자.png</code> (예: <code>4.png</code>) 추가. 바보 카드는 <code>0.png</code> 또는 <code>22.png</code>.
      </div>
    </div>
  </div>

<script>
/* ───────── 공통 유틸 ───────── */
function sumDigits(str){ return str.split('').reduce((a,ch)=> a + (/\d/.test(ch)? Number(ch):0), 0); }
function reduceNumber(n){
  if (n===11 || n===22) return n;
  while(n>9){
    n = String(n).split('').reduce((a,b)=>a+Number(b),0);
    if (n===11 || n===22) break;
  }
  return n;
}

/* ───────── 타로 0~21 ───────── */
const TAROT = {
  0:{name:'바보 (The Fool)', num:'0/22', kw:['순수','도전','새 출발','자유'],
     desc:'계획보다 호기심이 앞서는 시작. 가벼운 발걸음이 새 길을 엽니다. 안전망(작게 시작·짧은 실험)을 갖추면 더 멀리 가요.'},
  1:{name:'마법사 (The Magician)', num:'1', kw:['시작','창조','의지','실행'],
     desc:'아이디어를 현실로 소환하는 카드. 말·손·도구가 하나로 맞물릴 때 추진력이 납니다. “지금, 여기서” 가능한 한 걸음부터.'},
  2:{name:'여사제 (High Priestess)', num:'2', kw:['직관','내면','비밀','지혜'],
     desc:'겉보다 속. 조용한 관찰과 기록이 정답에 가깝게 데려갑니다. 답을 서두르지 말고 “왜 그런가”를 오래 바라봐요.'},
  3:{name:'여황제 (The Empress)', num:'3', kw:['풍요','창조성','돌봄','자연'],
     desc:'무르익는 계절. 돌봄과 창조가 만나 결과물이 풍성해집니다. 생활 리듬을 돌볼수록 작업 품질도 자랍니다.'},
  4:{name:'황제 (The Emperor)', num:'4', kw:['구조','안정','책임','리더십'],
     desc:'틀·규칙·권한 배분으로 안정감을 만듭니다. 결정은 명확하게, 기준은 일관되게. 시스템이 사람을 도와주게 하세요.'},
  5:{name:'교황 (The Hierophant)', num:'5', kw:['전통','신뢰','가르침','멘토'],
     desc:'믿을 만한 길잡이. 배운 것을 바탕으로 전하고 연결합니다. “의미”가 분명할수록 지지가 모입니다.'},
  6:{name:'연인 (The Lovers)', num:'6', kw:['사랑','선택','가치정렬'],
     desc:'중요한 선택. 나의 가치와 방향이 맞는지 점검하세요. 관계·협업은 “같은 이유”를 찾을 때 오래갑니다.'},
  7:{name:'전차 (The Chariot)', num:'7', kw:['의지','추진력','집중','승리'],
     desc:'흔들림 없이 전진. 속도보다 방향 유지가 승리의 핵심입니다. 분산되는 일은果断히 덜어내세요.'},
  8:{name:'힘 (Strength)', num:'8', kw:['용기','인내','자기 통제'],
     desc:'부드러운 통제. 스스로를 다스릴 때 외부의 난관이 풀립니다. 한 박자 천천히, 그러나 끊기지 않게.'},
  9:{name:'은둔자 (The Hermit)', num:'9', kw:['탐구','성찰','지혜'],
     desc:'등불 하나 들고 멈춤. 혼자서의 시간이 해답을 비춥니다. 소음에서 벗어나 핵심 질문을 붙잡으세요.'},
  10:{name:'운명의 수레바퀴 (Wheel of Fortune)', num:'10', kw:['변화','순환','기회'],
     desc:'오르내리는 바퀴. 흐름을 읽고 타이밍을 잡으세요. 집착을 내려놓으면 우연이味方합니다.'},
  11:{name:'정의 (Justice)', num:'11', kw:['균형','공정','진실','책임'],
     desc:'저울의 균형. 사실·증거·원칙에 기대어 판단하세요. “괜찮다”와 “안 된다”의 선을 또렷하게.'},
  12:{name:'매달린 사람 (Hanged Man)', num:'12', kw:['관점전환','멈춤','수용'],
     desc:'잠시 거꾸로 보기. 내려놓음이 진전을 부릅니다. 지금은 속도가 아니라 각도가 필요해요.'},
  13:{name:'죽음 (Death)', num:'13', kw:['종결','재탄생','큰 변화'],
     desc:'끝은 시작의 다른 이름. 오래된 것을 보내 새 자리를 만드세요. 비워야 들어옵니다.'},
  14:{name:'절제 (Temperance)', num:'14', kw:['조화','중용','균형','치유'],
     desc:'섞고 희석해 맞추는 기술. 무리하지 않는 조합이 오래 갑니다. 리듬·수면·음식 같은 기본이 효율을 만듭니다.'},
  15:{name:'악마 (The Devil)', num:'15', kw:['유혹','집착','패턴'],
     desc:'묶는 건 사슬이 아니라 습관. 인식하면 절반은 풀렸습니다. 쾌락·불안 루프의 스위치를 찾아보세요.'},
  16:{name:'탑 (The Tower)', num:'16', kw:['붕괴','각성','해방'],
     desc:'견고해 보이던 것이 무너질 때, 진짜 자유가 시작됩니다. 무너진 자리엔 더 진실한 구조가 서요.'},
  17:{name:'별 (The Star)', num:'17', kw:['희망','영감','회복','비전'],
     desc:'먼 곳의 빛. 회복과 영감의 시간이 이어집니다. 조급해하지 않아도 됩니다.'},
  18:{name:'달 (The Moon)', num:'18', kw:['무의식','불안','상상','직감'],
     desc:'안개 속 길. 두려움과 상상이 뒤섞입니다. 사실 체크와 직감의 균형을 잡으세요.'},
  19:{name:'태양 (The Sun)', num:'19', kw:['성취','자신감','기쁨','낙관'],
     desc:'가장 밝은 카드. 펼치고 나누고 축하하세요. 활력은 기회를 부릅니다.'},
  20:{name:'심판 (Judgement)', num:'20', kw:['부름','각성','회복','새 삶'],
     desc:'깊은 곳에서 부르는 소리. 예전의 나를 넘어섭니다. 소명에 응답할 타이밍.'},
  21:{name:'세계 (The World)', num:'21', kw:['완성','통합','귀결','순환'],
     desc:'한 바퀴의 완주. 닫힘과 동시에 다음 원이 시작돼요. 감사로 마무리하면 다음 단계가 매끄럽습니다.'}
};

/* ───────── 라이프 패스(1~9, 11, 22) ───────── */
const LP_LABEL = {
  1:'독립·개척·리더십', 2:'협력·감수성·조정', 3:'표현·창의·즐거움', 4:'안정·성실·기반',
  5:'변화·모험·자유', 6:'돌봄·책임·조화', 7:'탐구·분석·집중', 8:'권위·성취·재정',
  9:'포용·봉사·지혜', 11:'통찰·영감·직관', 22:'대기획·구현·마스터 빌더'
};

const EXPLAINS = {
  1:{ plus:'선봉에 서서 길을 여는 힘. 결정이 빠르고 추진이 경쾌합니다. 목표가 분명할수록 불필요한 소모가 줄어요.',
      minus:'독단·속전속결로 관계가 소모될 수 있어요. 피드백 루틴과 휴식 슬롯을 일정에 묶어두세요.',
      synergy:'{card}와 만나면 “아이디어→실행”이 가속합니다. 1인 프로젝트·창업·선도적 시도에 유리합니다.' },
  2:{ plus:'조율·중재·경청의 달인. 미묘한 분위기를 읽어 갈등을 부드럽게 풀어냅니다.',
      minus:'결정을 미루다 타이밍을 놓치기 쉬워요. “의견 수집 → 마감시한 → 결정” 3단계를 습관화하세요.',
      synergy:'{card}와 함께면 직관·관찰이 정밀해져 리서치·상담·검증 단계에서 강점을 보입니다.' },
  3:{ plus:'표현과 창의의 불꽃. 말·글·디자인 같은 표현이 살아납니다. 즐거움이 일의 동력이에요.',
      minus:'흥미 위주로 흐르면 완성도가 흔들립니다. 작은 목표·체크리스트로 리듬을 고정하세요.',
      synergy:'{card}와 이어지는 흐름입니다. 당신의 표현·창의·즐거움 기질이 두드러져 아이디어가 ‘실물’로 자랍니다.' },
  4:{ plus:'루틴과 시스템 구축. 꾸준함으로 신뢰를 쌓고 기반을 다집니다.',
      minus:'변화 저항이 커질 수 있어요. “작은 실험”을 안전 슬롯으로 두고 개선의 여지를 남겨두세요.',
      synergy:'{card}와 결합하면 운영·브랜딩·표준화 성과가 커집니다. 토대 위의 성장.' },
  5:{ plus:'전환·탐험·적응의 고수. 새 판을 짜고 트렌드를 빠르게 흡수합니다.',
      minus:'루틴 붕괴·산만함에 취약. “핵심 1개 + 선택 1개”만 집중해도 성과가 납니다.',
      synergy:'{card}와 함께면 배움과 전파의 흐름이 강해져 교육·여행·베타런칭에 유리합니다.' },
  6:{ plus:'돌봄·책임·관계의 균형. 팀을 편안히 묶어주는 신뢰의 축입니다.',
      minus:'과잉 책임으로 번아웃 위험. “내 몫·남의 몫·공유 몫” 경계를 선명히 하세요.',
      synergy:'{card}와 만나면 가치 정렬된 파트너십이 성과를 견인합니다. CX/커뮤니티에 강점.' },
  7:{ plus:'깊이·분석·성찰. 본질을 파고드는 집중력이 탁월합니다.',
      minus:'과도한 고립·완벽주의로 실행이 늦어질 수 있어요. 80% 가설로 빠르게 테스트하세요.',
      synergy:'{card}의 추진력과 만나면 “깊이+속도”가 동시에 살아납니다. 전략·데이터 분석 최적.' },
  8:{ plus:'목표·성과·재정 감각. 리더십과 거버넌스로 큰 그림을 굴립니다.',
      minus:'통제가 과해지면 자율성이 떨어져 성장성이 둔화됩니다. 권한 위임·OKR로 균형을 잡으세요.',
      synergy:'{card}와 결합하면 “부드러운 통제”로 지속 가능한 성과 관리가 가능합니다.' },
  9:{ plus:'포용·치유·지혜. 큰 그림에서 의미를 찾고 가치를 전합니다.',
      minus:'이상화로 현실 디테일을 놓칠 수 있어요. 체크리스트·마감으로 현실 닻을 내리세요.',
      synergy:'{card}와 만나면 “내적 통찰 → 타인에게 비춘 등불”이 됩니다. 멘토링·큐레이션에 강점.' },
  11:{ plus:'통찰·영감·균형 감각. 복잡한 사안의 중심을 정확히 짚습니다.',
      minus:'예민함·완벽주의가 체력을 깎을 수 있어요. 리듬·회복 슬롯을 우선 배치하세요.',
      synergy:'{card}와 공명하면 “공정·균형” 기준으로 의사결정이 또렷해집니다.' },
  22:{ plus:'마스터 빌더. 대기획을 “작동하는 시스템”으로 구현합니다.',
      minus:'스케일만 키우다 좌초 위험. 파트·스테이크홀더 관리와 단계적 롤아웃이 필수.',
      synergy:'{card}와 만나면 “가볍게 시작→거대한 실현”으로 이어집니다. 플랫폼·대형 프로젝트에 최적.' }
};

/* ───────── 렌더링 ───────── */
function calc(dobStr){
  const lifePath = reduceNumber(sumDigits(dobStr || ''));
  const tarot = (lifePath===22) ? TAROT[0] : TAROT[lifePath];
  return {lifePath, tarot};
}

function tryLoadImage(numList){
  return new Promise((resolve)=>{
    const frame = document.getElementById('imgframe');
    const ph = document.getElementById('placeholder');
    const old = frame.querySelector('img'); if(old) old.remove();
    function next(i){
      if(i>=numList.length){ ph.style.display='flex'; return resolve(false); }
      const img = new Image(); img.src = 'cards/' + numList[i] + '.png';
      img.onload = ()=>{ ph.style.display='none'; frame.appendChild(img); resolve(true); };
      img.onerror = ()=> next(i+1);
    } next(0);
  });
}

function render(dob){
  const result = document.getElementById('result');
  const lpnum = document.getElementById('lpnum');
  const lptext = document.getElementById('lptext');
  const plus = document.getElementById('lp-plus');
  const minus = document.getElementById('lp-minus');
  const syn = document.getElementById('lp-synergy');
  const doblabel = document.getElementById('doblabel');
  const tarotline = document.getElementById('tarotline');
  const keywords = document.getElementById('keywords');
  const desc = document.getElementById('desc');
  const phnum = document.getElementById('phnum');
  const phname = document.getElementById('phname');
  const shareBtn = document.getElementById('share');
  const copybox = document.getElementById('copybox');

  const {lifePath, tarot} = calc(dob);
  result.style.display='block'; copybox.style.display='none';

  lpnum.textContent = lifePath;
  lptext.textContent = LP_LABEL[lifePath] || '—';
  doblabel.textContent = '생일: ' + dob;

  const ex = EXPLAINS[lifePath];
  plus.textContent  = ex?.plus || '—';
  minus.textContent = ex ? ('주의: ' + ex.minus) : '—';
  syn.textContent   = (ex?.synergy || '—').replaceAll('{card}', tarot?.name || '해당 카드');

  tarotline.textContent = tarot ? (tarot.name + ' · 카드 번호 ' + tarot.num) : '—';
  keywords.innerHTML = '';
  (tarot?.kw || []).forEach(k=>{
    const span = document.createElement('span'); span.className='kw'; span.textContent=k; keywords.appendChild(span);
  });
  desc.textContent = tarot?.desc || '—';
  phnum.textContent = tarot?.num || '–';
  phname.textContent = tarot?.name || '카드';

  const nums = (lifePath===22) ? [0,22] : [lifePath];
  tryLoadImage(nums);
  shareBtn.style.display='inline-block';
  history.replaceState({}, '', location.pathname + '?dob=' + dob);
}

/* ───────── 입력/공유 ───────── */
function onShare(){
  const copybox = document.getElementById('copybox');
  navigator.clipboard?.writeText(location.href).then(()=>{
    copybox.style.display='block'; setTimeout(()=> copybox.style.display='none', 1800);
  }).catch(()=> alert('클립보드 복사가 지원되지 않아요. 주소창 링크를 복사해주세요.'));
}

function main(){
  const yy=document.getElementById('yy'), mm=document.getElementById('mm'), dd=document.getElementById('dd');
  const btn=document.getElementById('calc'); const shareBtn=document.getElementById('share');

  // 숫자 입력 시 다음 칸으로
  [yy,mm,dd].forEach((el,i)=>{
    el.addEventListener('input', ()=>{
      const max = i===0 ? 4 : 2;
      el.value = el.value.replace(/[^\d]/g,'').slice(0,max);
      if(el.value.length===max && i<2) [yy,mm,dd][i+1].focus();
    });
  });

  // URL 파라미터 dob=yyyy-mm-dd
  const q = new URLSearchParams(location.search).get('dob');
  if(q && /^\d{4}-\d{2}-\d{2}$/.test(q)){ yy.value=q.slice(0,4); mm.value=q.slice(5,7); dd.value=q.slice(8,10); render(q); }

  btn.addEventListener('click', ()=>{
    const y=yy.value.trim(), m=mm.value.trim(), d=dd.value.trim();
    if(y.length!==4 || m.length!==2 || d.length!==2) return alert('생년월일을 정확히 입력하세요.\n예: 2001-08-15');
    const dob = `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
    const t = new Date(dob);
    if(isNaN(t.getTime()) || t.getFullYear()!=+y || (t.getMonth()+1)!=+m || t.getDate()!=+d) return alert('유효한 날짜가 아니에요. 다시 확인해 주세요.');
    render(dob);
  });

  shareBtn.addEventListener('click', onShare);
}
main();
</script>
</body>
</html>
